{"version":3,"sources":["app/components/layout.js","app/components/loader.js","app/components/modal.js","app/components/toolbar.js","app/editor/component.js","app/editor/model.js","app/index.js","app/initialize.js","app/models.js","app/presentations/Presentation/component.js","app/presentations/Presentation/model.js","app/presentations/component.js","app/presentations/model.js","app/presentations/presentationModal.js","app/slides/Preview/component.js","app/slides/Slide/component.js","app/slides/component.js","app/slides/model.js","app/slides/slidesModal.js","app/slideshow/component.js","app/utils/.secret.js","app/utils/Tasks.js","app/utils/animations.js","app/utils/index.js","app/utils/requests.js"],"names":["Layout","view","children","mdl","attrs","m","Toolbar","Loader","isActive","id","modals","Modal","modalTitle","modalContent","modalFooter","onremove","onclick","toggleModal","AuthModal","state","code","verifyCode","e","isLoggedIn","sessionStorage","setItem","oninit","http","postTask","fork","value","autofocus","type","onkeyup","target","login","removeItem","toggleModalSwitch","route","get","split","context","length","toPresentations","Link","selector","class","href","toSlides","CurrentPresentation","toSlideShow","slideShow","printToPDF","caputerScreen","navView","page","actionView","auth","Button","action","label","Editor","presentationId","slide","title","content","_","set","onError","error","log","onSuccess","getSlide","param","updateInput","input","save","preventDefault","oncreate","placeholder","oninput","trust","markup","render","loadSlide","q","JSON","stringify","map","editSlide","root","document","body","getItem","Models","makeRoutes","onmatch","Slides","Presentations","SlideShow","addEventListener","require","hljs","registerLanguage","javascript","MarkdownIt","html","xhtmlOut","breaks","langPrefix","linkify","typographer","quotes","highlight","str","lang","use","highlightjs","emoji","sub","sup","ins","footnote","deflist","abbr","arrows","SlideModel","contents","order","presentation_id","SlideShowStruct","keys","Set","values","items","Stream","getProfile","w","window","open","c","cloneNode","card","getElementById","styles","stylesheet","appendChild","style","print","close","profile","innerWidth","presentations","slides","modal","Presentation","getSlidesAndStartSlideShow","filter","p","sort","a","b","task","models","deleted","authDeleteTask","confirm","Task","of","rejected","removePresTask","pId","chain","deletePresentationsTask","margin","height","position","PlayLine","EditLine","RemoveLine","stopPropagation","loadSlides","errors","dto","findPresentations","PresentationModal","presentationModel","PresentationModel","dom","onBeforeRemove","vnode","done","animation","key","toViewModel","data","getPresentations","savePresentationTask","push","SlidePosition","update","updateSlidesPosition","dir","prevSlide","x","nextSlide","disabled","Preview","getSlides","s","updateAndSaveSlideTask","removeSlideTask","tail","reduceOrder","right","removeSlide","updateList","handleDragStart","ev","opacity","dataTransfer","effectAllowed","setData","previewDrag","drag","handleDragOver","drop","handleDragLeave","handleDrop","handleDragEnd","slideDrag","dragging","start","end","dragged","dropped","draggable","ondragstart","ondragend","ondragover","ondrop","ondragleave","top","Slide","addSlideToShow","dragId","droppable","_slide","left","handleDragEnter","bColor","getData","item","dropEffect","SlidesModal","overflowY","ondragenter","model","toStruct","acc","has","size","add","Object","orderOf","forGreater","checkSlide","forLess","getId","resetOrder","updateRemoveSlide","Array","updateId","updateSlideDragStart","updateDrag","updateOrder","updateSlideDragEnd","updateDrop","updateStateDragEnd","saveSlideTask","deleteSlideTask","updateSlideTask","qlSlides","ENDING","undefined","cursor","calcStatePosition","updateStatePosition","changeSlide","scrollBy","tabindex","onmouseenter","onmouseleave","onbeforeupdate","includes","onupdate","scrollIntoView","block","inline","onlineUrl","secure","toString","postQl","query","rej","res","request","method","url","withCredentials","then","putTask","getTask","deleteTask","animateSlideEntrance","animate","transform","duration","animateEntranceRight","scale","animateChildEntrance","child","index","setTimeout","animateExit","anim","waapi","Promise","resolve","onfinish","animateFadeIn","transition","animateFadeOut","animeEntrance","el","easing","translateX","offset","bounceEntrance","keyframes","makeQuery","string","parse","repeat","n","f","wait","v","console","viewModelMap","signature","_map","prop","findPresentationsTask","httpTasks","getQlTask","findSlidesTask","loadSlideTask"],"mappings":"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","file":"docs/app.js","sourcesContent":["import Toolbar from \"./toolbar.js\"\n\nexport const Layout = {\n  view: ({ children, attrs: { mdl } }) =>\n    m(\".container\", m(Toolbar, { mdl }), children),\n}\n","export const Loader = () =>\n  m(\".lds-roller\", [\n    m(\".\"),\n    m(\".\"),\n    m(\".\"),\n    m(\".\"),\n    m(\".\"),\n    m(\".\"),\n    m(\".\"),\n    m(\".\")\n  ])\n","const isActive = (mdl, id) => (mdl.modals[id] ? \"active\" : \"\")\n\nexport const Modal = ({ attrs: { mdl } }) => {\n  return {\n    view: ({\n      attrs: { id, modalTitle, modalContent, modalFooter, onremove },\n    }) =>\n      mdl.modals[id] &&\n      m(\n        `.modal.${isActive(mdl, id)}[id=${id}]`,\n        {\n          onremove,\n        },\n        m(\"a.modal-overlay[href='#'][aria-label='Close']\", {\n          onclick: () => mdl.toggleModal(mdl, id),\n        }),\n        m(\".modal-container\", [\n          m(\".modal-header\", [\n            m(\"button.btn.btn-clear.float-right[aria-label='Close']\", {\n              onclick: () => mdl.toggleModal(mdl, id),\n            }),\n            m(\".modal-title.h5\", modalTitle),\n          ]),\n          m(\".modal-body\", m(\".content\", modalContent)),\n          m(\".modal-footer\", modalFooter),\n        ])\n      ),\n  }\n}\n","import { isEmpty, split, view, lensProp } from \"ramda\"\nimport { log, secure } from \"utils\"\nimport http from \"utils/Tasks.js\"\nimport { Modal } from \"./modal.js\"\n\nconst AuthModal = ({ attrs: { mdl } }) => {\n  const state = { code: \"\" }\n\n  const verifyCode = (state) => (e) => {\n    if (secure(state.code) === mdl.code) {\n      mdl.isLoggedIn = true\n      mdl.toggleModal(mdl, \"auth\")\n      sessionStorage.setItem(\"code\", true)\n    }\n  }\n\n  return {\n    oninit: () => {\n      http\n        .postTask(\"https://ancient-headland-12919.herokuapp.com/auth\")()\n        .fork(log(\"e\"), (code) => (mdl.code = code))\n    },\n    view: () =>\n      m(Modal, {\n        mdl,\n        id: \"auth\",\n        modalTitle: \"Verify Code\",\n        modalContent: m(\"input.modal-input\", {\n          value: state.code,\n          autofocus: true,\n          type: \"text\",\n          onkeyup: (e) => (state.code = e.target.value),\n        }),\n        modalFooter: m(\n          \"button.card-btn\",\n          { onclick: verifyCode(state) },\n          \"Login\"\n        ),\n      }),\n  }\n}\n\nconst login = (mdl) =>\n  mdl.isLoggedIn\n    ? m(\n        \"a.btn.btn-link\",\n        {\n          onclick: () => {\n            mdl.isLoggedIn = false\n            sessionStorage.removeItem(\"code\")\n          },\n        },\n        \"Logout\"\n      )\n    : m(\n        \"a.btn.btn-link\",\n        {\n          onclick: () => {\n            mdl.toggleModal(mdl, \"auth\")\n          },\n        },\n        \"Login\"\n      )\n\nconst toggleModalSwitch = (mdl) =>\n  mdl.isLoggedIn &&\n  m(\n    \"a.btn.btn-link\",\n    {\n      onclick: () => {\n        let route = m.route.get().split(\"/\")\n        let context = route[route.length - 1]\n        mdl.toggleModal(mdl, context)\n      },\n    },\n    \"Add New\"\n  )\n\nconst toPresentations = [\n  m(\n    m.route.Link,\n    { selector: \"a\", class: \"btn btn-link\", href: \"/presentations\" },\n    \"Presentations\"\n  ),\n]\n\nconst toSlides = (mdl) => [\n  mdl.isLoggedIn &&\n    m(\n      m.route.Link,\n      {\n        selector: \"a\",\n        class: \"btn btn-link\",\n        href: `/presentation/${mdl.CurrentPresentation.id}/slides`,\n      },\n      \"slides\"\n    ),\n]\n\nconst toSlideShow = (mdl) =>\n  mdl.CurrentPresentation &&\n  !isEmpty(mdl.CurrentPresentation.slideShow) &&\n  m(\n    m.route.Link,\n    {\n      selector: \"a\",\n      class: \"btn btn-link\",\n      href: `/slideshow/${mdl.CurrentPresentation.id}`,\n    },\n    \"Slide Show\"\n  )\n\nconst printToPDF = (mdl) =>\n  m(\n    m.route.Link,\n    {\n      selector: \"a\",\n      class: \"btn btn-link\",\n      onclick: (e) => mdl.caputerScreen(),\n    },\n    \"Print Slide\"\n  )\n\nconst navView = (mdl) => {\n  let page = view(lensProp(1), split(\"/\", m.route.get()))\n  switch (page) {\n    case \"presentation\":\n      return [toPresentations, toSlideShow(mdl)]\n      break\n\n    case \"slideshow\":\n      return [toPresentations, toSlides(mdl)]\n      break\n\n    case \"slides\":\n      return [toPresentations, toSlideShow(mdl)]\n      break\n\n    case \"edit\":\n      return [toPresentations, toSlides(mdl), toSlideShow(mdl)]\n      break\n    default:\n  }\n}\n\nconst actionView = (mdl) => {\n  let page = view(lensProp(1), split(\"/\", m.route.get()))\n  switch (page) {\n    case \"presentations\":\n      return [login(mdl), toggleModalSwitch(mdl)]\n      break\n    case \"presentation\":\n      return [login(mdl), toggleModalSwitch(mdl)]\n      break\n    case \"slideshow\":\n      return [login(mdl), printToPDF(mdl)]\n      break\n    default:\n  }\n}\n\nconst Toolbar = ({ attrs: { mdl } }) => {\n  return {\n    view: ({ attrs: { mdl } }) =>\n      m(\n        \".navbar\",\n        m(\".navbar-section\", navView(mdl)),\n        m(\".navbar-section\", actionView(mdl)),\n        mdl.modals.auth && m(AuthModal, { mdl })\n      ),\n  }\n}\n\nexport default Toolbar\n","import { loadSlide, editSlide } from \"./model.js\"\nimport Loader from \"components\"\n\nconst Button = {\n  view: ({ attrs: { action, label } }) =>\n    m(\n      \"button.card-btn\",\n      {\n        onclick: action\n      },\n      label\n    )\n}\n\nconst Editor = ({ attrs: { mdl } }) => {\n  let state = {\n    presentationId: \"\",\n    slide: { title: \"\", content: \"\", id: \"\" }\n  }\n\n  const toSlides = (_) =>\n    m.route.set(`/presentation/${state.presentationId}/slides`)\n\n  const onError = (error) => log(\"error\")(error)\n\n  const onSuccess = (slide) => {\n    state.slide = slide\n  }\n\n  const getSlide = () => {\n    state.slide.id = m.route.param(\"id\")\n    state.presentationId = m.route.param(\"pid\")\n    return loadSlide(state.slide.id).fork(onError, onSuccess)\n  }\n\n  const updateInput = (input) => (e) => (state.slide[input] = e.target.value)\n\n  const save = (e) => {\n    e.preventDefault()\n\n    editSlide(state.slide).fork(onError, () => toSlides())\n  }\n\n  return {\n    oncreate: getSlide(),\n    view: () => {\n      return m(\".container.editor\", [\n        m(\n          \".editor-left\",\n          m(\".card.follow\", [\n            m(\".card-header\", [\n              m(\".card-footer\", [\n                m(Button, { action: save, label: \"Save\" }),\n                m(Button, { action: toSlides, label: \"Cancel\" })\n              ]),\n              m(\"input.editor-input\", {\n                type: \"text\",\n                placeholder: \"Slide Title\",\n                oninput: updateInput(\"title\"),\n                value: state.slide.title\n              })\n            ]),\n            m(\"textarea.editor-text\", {\n              oninput: updateInput(\"content\"),\n              value: state.slide.content\n            }),\n          ])\n        ),\n        m(\n          \".editor-right\",\n          m.trust(mdl.markup.render(state.slide.content || \"\"))\n        )\n      ])\n    }\n  }\n}\n\nexport default Editor\n","import { getQlTask } from \"utils\"\nimport { path } from \"ramda\"\n\nexport const loadSlide = id => {\n  let q = `{ slide(where:{id:${JSON.stringify(id)}}){\n              id content title\n            }\n          }`\n  return getQlTask(q).map(path([\"data\", \"slide\"]))\n}\n\nexport const editSlide = ({ id, title, content }) => {\n  let q = `mutation {\n            updateSlide(\n              data: {\n                title: ${JSON.stringify(title)}\n                content: ${JSON.stringify(content)}\n              }\n              where: {\n                id: ${JSON.stringify(id)}\n              }) {\n                id\n                title\n              }\n        }`\n\n  return getQlTask(q).map(path([\"data\", \"updatePresentation\", \"Slides\"]))\n}\n","const root = document.body\nimport { Layout } from \"./components/layout.js\"\n\nimport Presentations from \"./presentations/component.js\"\nimport Slides from \"./slides/component.js\"\nimport Editor from \"./editor/component.js\"\nimport SlideShow from \"./slideshow/component.js\"\nimport Models from \"./models.js\"\n\nif (sessionStorage.getItem(\"code\")) {\n  Models.isLoggedIn = true\n}\n\nconst makeRoutes = (mdl) => {\n  return {\n    \"/presentations\": {\n      onmatch: () => {\n        mdl.CurrentPresentation = {\n          title: \"\",\n          id: \"\",\n          slideShow: [],\n          Slides: [],\n        }\n      },\n      render: () => m(Layout, { mdl }, m(Presentations, { mdl })),\n    },\n    \"/presentation/:id/slides\": {\n      render: () => m(Layout, { mdl }, m(Slides, { mdl })),\n    },\n    \"/edit/:pid/slide/:id\": {\n      onmatch: () => mdl.isLoggedIn || m.route.set(m.route.get()),\n      render: () => m(Layout, { mdl }, m(Editor, { mdl })),\n    },\n    \"/slideshow/:id\": {\n      render: () => m(Layout, { mdl }, m(SlideShow, { mdl })),\n    },\n  }\n}\n\nm.route(root, \"/presentations\", makeRoutes(Models))\n","document.addEventListener(\"DOMContentLoaded\", () => require(\"./index.js\"))\n","import MarkdownIt from \"markdown-it\"\nimport highlightjs from \"markdown-it-highlightjs\"\nimport emoji from \"markdown-it-emoji\"\nimport sub from \"markdown-it-sub\"\nimport sup from \"markdown-it-sup\"\nimport ins from \"markdown-it-ins\"\nimport footnote from \"markdown-it-footnote\"\nimport deflist from \"markdown-it-deflist\"\nimport abbr from \"markdown-it-abbr\"\n// import imsize from \"markdown-it-imsize\"\nimport arrows from \"markdown-it-smartarrows\"\nimport hljs from \"highlight.js\"\nimport javascript from \"highlight.js/lib/languages/javascript\"\n// import printJS from \"print-js\"\nhljs.registerLanguage(\"javascript\", javascript)\n\nconst markup = new MarkdownIt({\n  html: true, // Enable HTML tags in source\n  xhtmlOut: true, // Use '/' to close single tags (<br />).\n  // This is only for full CommonMark compatibility.\n  breaks: true, // Convert '\\n' in paragraphs into <br>\n  langPrefix: \"\", // CSS language prefix for fenced blocks. Can be\n  // useful for external highlighters.\n  linkify: true, // Autoconvert URL-like text to links\n\n  // Enable some language-neutral replacement + quotes beautification\n  typographer: true,\n\n  // Double + single quotes replacement pairs, when typographer enabled,\n  // and smartquotes on. Could be either a String or an Array.\n  //\n  // For example, you can use '«»„“' for Russian, '„“‚‘' for German,\n  // and ['«\\xA0', '\\xA0»', '‹\\xA0', '\\xA0›'] for French (including nbsp).\n  quotes: \"“”‘’\",\n\n  // Highlighter function. Should return escaped HTML,\n  // or '' if the source string is not changed and should be escaped externally.\n  // If result starts with <pre... internal wrapper is skipped.\n  highlight: (str, lang) => str,\n})\n  .use(highlightjs, { hljs })\n  .use(emoji)\n  .use(sub)\n  .use(sup)\n  .use(ins)\n  .use(footnote)\n  .use(deflist)\n  .use(abbr)\n  // .use(imsize, { autofill: true })\n  .use(arrows)\n\nconst SlideModel = {\n  title: \"\",\n  contents: \"\",\n  order: 0,\n  presentation_id: \"\",\n}\n\nconst Slides = []\n\nconst Presentations = []\n\nconst SlideShowStruct = {\n  keys: new Set(),\n  values: {},\n  items: Stream([]),\n}\n\nconst CurrentPresentation = {\n  title: \"\",\n  id: \"\",\n  slideShow: [],\n  Slides,\n}\n\nconst getProfile = (w) => {\n  if (w < 668) return \"phone\"\n  if (w < 920) return \"tablet\"\n  return \"desktop\"\n}\n\nconst caputerScreen = () => {\n  let w = window.open()\n  let c = document.cloneNode(document)\n  let card = c.getElementById(\"slidecard\")\n  let styles = card.stylesheet\n  w.document.body.appendChild(card)\n  w.document.body.style = styles\n  w.print()\n  w.close()\n}\n\nconst Models = {\n  caputerScreen,\n  markup,\n  profile: getProfile(window.innerWidth),\n  SlideShowStruct,\n  Presentations,\n  CurrentPresentation,\n  SlideModel,\n  modals: {\n    presentations: false,\n    slides: false,\n    auth: false,\n  },\n  toggleModal: (mdl, modal) => (mdl.modals[modal] = !mdl.modals[modal]),\n  code: null,\n  isLoggedIn: false,\n}\n\nexport default Models\n","import { log } from \"utils\"\nimport { compose, propEq, without, sortBy, filter } from \"ramda\"\nimport { deletePresentationsTask } from \"../model.js\"\nimport Task from \"data.task\"\nimport {\n  EditLine,\n  PlayLine,\n  RemoveLine,\n} from \"@mithril-icons/clarity/cjs/index\"\nimport { loadSlides } from \"./model.js\"\n\nconst Presentation = ({ attrs: { mdl } }) => {\n  const getSlidesAndStartSlideShow = (id) => {\n    const onSuccess = (slides) => {\n      mdl.CurrentPresentation = slides\n      mdl.CurrentPresentation.slideShow = mdl.CurrentPresentation.Slides.filter(\n        (p) => p.order > 0\n      ).sort((a, b) => a.order - b.order)\n      m.route.set(`/slideshow/${id}`)\n    }\n\n    const onError = log(\"e\")\n\n    loadSlides(id).fork(onError, onSuccess)\n  }\n\n  const onError = (task) => (error) => log(`error with ${task}: `)(error)\n  const onSuccess = (models) => (deleted) => {\n    return (models.Presentations = without([deleted], models.Presentations))\n  }\n\n  const authDeleteTask = (id) =>\n    window.confirm(\"Are you sure you want to delete?\")\n      ? Task.of(id)\n      : Task.rejected(\"user denied req\")\n\n  const removePresTask = (pId) =>\n    authDeleteTask(pId)\n      .chain(deletePresentationsTask)\n      .fork(onError(\"deleting\"), onSuccess(mdl))\n\n  return {\n    view: ({ attrs: { title, id, mdl } }) =>\n      m(\n        \".card.column.col-3\",\n        { style: { margin: \"10px\" } },\n        m(\n          \".tile\",\n          {\n            style: { height: \"100px\" },\n          },\n          m(\".tile-content\", title),\n          m(\n            \".tile-action\",\n            {\n              style: {\n                position: \"relative\",\n              },\n            },\n            m(PlayLine, {\n              class: \"clarity\",\n              onclick: () => getSlidesAndStartSlideShow(id),\n            }),\n\n            mdl.isLoggedIn && [\n              m(EditLine, {\n                class: \"clarity\",\n                onclick: () => m.route.set(`/presentation/${id}/slides`),\n              }),\n              m(RemoveLine, {\n                class: \"clarity\",\n                onclick: (e) => {\n                  e.stopPropagation()\n                  removePresTask(id)\n                },\n              }),\n            ]\n          )\n        )\n      ),\n  }\n}\n\nexport default Presentation\n","import { path } from \"ramda\"\nimport { getQlTask } from \"utils\"\n\nexport const loadSlides = (id) =>\n  getQlTask(\n    `{ presentation(where:{id:${JSON.stringify(id)}}){\n    id, title, Slides { id title content order }\n  } }`\n  ).map(path([\"data\", \"presentation\"]))\n","import { clone } from \"ramda\"\nimport { animateFadeIn, log } from \"utils\"\nimport PresentationModal from \"./presentationModal.js\"\nimport Presentation from \"./Presentation/component.js\"\nimport { getPresentations } from \"./model.js\"\n\nconst Presentations = () => {\n  const state = {\n    errors: null,\n    title: \"\",\n  }\n\n  const onError = (error) => {\n    log(\"error\")(error)\n    state.error = error\n  }\n\n  const onSuccess = (mdl) => (dto) => (mdl.Presentations = dto)\n\n  const findPresentations = ({ attrs: { mdl } }) =>\n    getPresentations().fork(onError, onSuccess(mdl))\n\n  return {\n    oninit: findPresentations,\n\n    view: ({ attrs: { mdl } }) => [\n      mdl.modals.presentations &&\n        m(PresentationModal, {\n          onremove: () => {\n            state.title = \"\"\n            state.errors = null\n          },\n          mdl,\n          state,\n          presentations: mdl.Presentations,\n          presentationModel: clone(mdl.PresentationModel),\n        }),\n\n      m(\n        \".container.columns\",\n        {\n          oncreate: ({ dom }) => animateFadeIn({ dom }),\n          onBeforeRemove: (vnode, done) => {\n            vnode.dom.addEventListener(\"animationend\", done)\n            vnode.dom.style.animation = \"fadeOut 1s\"\n          },\n        },\n        [\n          mdl.Presentations &&\n            mdl.Presentations.map(({ title, id }) =>\n              m(Presentation, {\n                key: id,\n                id,\n                title,\n                mdl,\n              })\n            ),\n        ]\n      ),\n    ],\n  }\n}\n\nexport default Presentations\n","import { getQlTask, log } from \"utils\"\nimport { path } from \"ramda\"\n\nconst toViewModel = ({ data, errors }) => {\n  log(\"errors\")(errors)\n  return { data, errors }\n}\n\nexport const getPresentations = () =>\n  getQlTask(`query {\n  presentations{ id, title}\n}`).map(path([\"data\", \"presentations\"]))\n\nexport const savePresentationTask = (state) => {\n  const q = `mutation {\n    createPresentation(data: {title: ${JSON.stringify(state.title)}})\n    { title id}\n  }`\n  return getQlTask(q).map(path([\"data\", \"createPresentation\"]))\n}\n\nexport const deletePresentationsTask = (id) => {\n  const q = `mutation {\n    deletePresentation(where: {id: ${JSON.stringify(id)}})\n    { title id}\n  }`\n  return getQlTask(q).map(path([\"data\", \"deletePresentation\"]))\n}\n","import { savePresentationTask } from \"./model.js\"\nimport { log } from \"utils\"\nimport { Modal } from \"components/modal\"\n\nconst PresentationModal = ({\n  attrs: { state, mdl, presentations, onremove },\n}) => {\n  const onError = (errors) => {\n    log(\"error\")(errors)\n    state.errors = errors\n    toggleModal()\n  }\n  const onSuccess = (p) => {\n    state.title = \"\"\n    state.errors = null\n    presentations.push(p)\n    mdl.toggleModal(mdl, \"presentations\")\n  }\n\n  const save = (e) => {\n    e.preventDefault()\n    savePresentationTask(state).fork(onError, onSuccess)\n  }\n\n  return {\n    view: () =>\n      m(Modal, {\n        onremove,\n        mdl: mdl,\n        id: \"presentations\",\n        modalTitle: \"New Presentation\",\n        modalContent: m(\"input\", {\n          value: state.title,\n          autofocus: true,\n          type: \"text\",\n          onkeyup: (e) => (state.title = e.target.value),\n        }),\n        modalFooter: m(\n          \"button.card-btn\",\n          { onclick: save },\n          \"create presentation\"\n        ),\n      }),\n  }\n}\n\nexport default PresentationModal\n","import { concat, eqProps, compose, filter, map, propEq, head } from \"ramda\"\nimport { log, animateFadeIn } from \"utils\"\nimport {\n  forGreater,\n  reduceOrder,\n  updateRemoveSlide,\n  updateSlideTask,\n} from \"../model.js\"\nimport { RemoveLine, EditLine } from \"@mithril-icons/clarity/cjs\"\n\nconst SlidePosition = ({ attrs: { update } }) => {\n  const updateSlidesPosition = (dir, slides, slide) => {\n    switch (dir) {\n      case \"left\":\n        let prevSlide = slides.filter((x) => x.order == slide.order - 1)[0]\n        prevSlide.order++\n        slide.order--\n        update([prevSlide, slide])\n        break\n      case \"right\":\n        let nextSlide = slides.filter((x) => x.order == slide.order + 1)[0]\n        slide.order++\n        nextSlide.order--\n        update([nextSlide, slide])\n        break\n    }\n  }\n\n  return {\n    view: ({ attrs: { slides, slide, dir } }) =>\n      m(\n        `button.s-circle`,\n        {\n          disabled:\n            (dir == \"right\" && slide.order == slides.length) ||\n            (dir == \"left\" && slide.order == 1),\n          onclick: () => updateSlidesPosition(dir, slides, slide),\n        },\n        m(`i.icon icon-arrow-${dir}`)\n      ),\n  }\n}\n\nconst Preview = ({ attrs: { getSlides, mdl, s, key, state } }) => {\n  const onError = (task) => (error) => log(`error with ${task}`)(error)\n\n  const onSuccess = (_) => getSlides({ attrs: { mdl } })\n\n  const updateAndSaveSlideTask = (slides) => {\n    return updateSlideTask(mdl.CurrentPresentation.id)(slides).fork(\n      onError(\"updating\"),\n      onSuccess\n    )\n  }\n\n  const removeSlideTask = (s) => {\n    let tail = compose(map(reduceOrder), filter(forGreater(s)))(state.right())\n    let removeSlide = updateRemoveSlide(s)\n\n    let updateList = concat(removeSlide, tail)\n\n    updateAndSaveSlideTask(updateList)\n  }\n\n  const handleDragStart = (ev) => {\n    ev.target.style.opacity = \"0.4\"\n    ev.dataTransfer.effectAllowed = \"move\"\n    ev.dataTransfer.setData(\"text/plain\", \"preview\")\n    state.previewDrag.drag = head(filter(propEq(\"id\", s.id), state.right()))\n  }\n\n  const handleDragOver = (ev) => {\n    ev.preventDefault()\n\n    if (state.previewDrag.drag) state.previewDrag.drop = s\n  }\n\n  const handleDragLeave = (ev) => {\n    ev.preventDefault()\n    state.previewDrag.drop = null\n  }\n\n  const handleDrop = (ev) => ev.preventDefault()\n\n  const handleDragEnd = (ev) => {\n    ev.target.style.opacity = \"1\"\n    state.slideDrag.dragging = false\n    if (state.previewDrag.drop) {\n      let start = state.previewDrag.drag.order\n      let end = state.previewDrag.drop.order\n\n      let dragged = state.previewDrag.drag\n      let dropped = state.previewDrag.drop\n\n      state.previewDrag.drag = mdl.SlideModel\n      state.previewDrag.drop = mdl.SlideModel\n\n      if (!eqProps(\"id\", dragged, dropped)) {\n        dragged.order = end\n        dropped.order = start\n\n        updateAndSaveSlideTask([dragged, dropped])\n      }\n    }\n  }\n\n  return {\n    oncreate: ({ dom }) => animateFadeIn({ dom }),\n    view: ({ attrs: { mdl, s, state } }) =>\n      m(\n        \".card.preview\",\n        {\n          draggable: mdl.isLoggedIn,\n          ondragstart: handleDragStart,\n          ondragend: handleDragEnd,\n          ondragover: handleDragOver,\n          ondrop: handleDrop,\n          ondragleave: handleDragLeave,\n          style: {\n            position: \"relative\",\n            opacity:\n              state.previewDrag.drop && state.previewDrag.drop.id == s.id\n                ? 0.4\n                : 1,\n          },\n        },\n        [\n          m(\".card-header\", [\n            m(\"p.slidePosition\", s.order),\n            mdl.isLoggedIn &&\n              m(RemoveLine, {\n                class: \"clarity\",\n                style: {\n                  position: \"absolute\",\n                  top: 0,\n                  right: 0,\n                },\n                onclick: () => removeSlideTask(s),\n              }),\n          ]),\n          m(\"p.slidePosition\", s.title),\n          // m(\".card-body\", m.trust(mdl.markup.render(s.content || \"\"))),\n          mdl.isLoggedIn &&\n            m(\".card-footer\", [\n              m(SlidePosition, {\n                slides: state.right(),\n                dir: \"left\",\n                slide: s,\n                update: updateAndSaveSlideTask,\n              }),\n              m(EditLine, {\n                class: \"clarity\",\n                style: {\n                  position: \"absolute\",\n                  top: 35,\n                  right: 0,\n                },\n                onclick: () => {\n                  m.route.set(\n                    `/edit/${mdl.CurrentPresentation.id}/slide/${s.id}`\n                  )\n                },\n              }),\n              m(SlidePosition, {\n                slides: state.right(),\n                dir: \"right\",\n                slide: s,\n                update: updateAndSaveSlideTask,\n              }),\n            ]),\n        ]\n      ),\n  }\n}\n\nexport default Preview\n","import Task from \"data.task\"\nimport { log } from \"utils\"\nimport { take } from \"ramda\"\nimport {\n  updateSlideDragStart,\n  updateSlideDragEnd,\n  updateStateDragEnd,\n  updateSlideTask,\n  deleteSlideTask,\n} from \"../model.js\"\nimport { EditLine, RemoveLine } from \"@mithril-icons/clarity/cjs\"\n\nconst Slide = ({ attrs: { getSlides, mdl, s, key, state } }) => {\n  const onError = (task) => (error) => log(`error with ${task}`)(error)\n  const onSuccess = (_) => getSlides({ attrs: { mdl } })\n\n  const authDeleteTask = (id) =>\n    window.confirm(\"Are you sure you want to delete?\")\n      ? Task.of(id)\n      : Task.rejected(id)\n\n  const removeSlideTask = (id) =>\n    authDeleteTask(id)\n      .chain(deleteSlideTask(state.presentationId))\n      .fork(onError(\"deleting\"), onSuccess)\n\n  const addSlideToShow = (s) => {\n    updateSlideTask(state.presentationId)([s]).fork(\n      onError(\"updating\"),\n      (_) => {\n        state.slideDrag = {\n          dragId: \"\",\n          dragging: false,\n          droppable: false,\n        }\n        onSuccess()\n      }\n    )\n  }\n\n  const handleDragStart = (ev) => {\n    ev.target.style.opacity = \"0.4\"\n    ev.dataTransfer.effectAllowed = \"move\"\n    ev.dataTransfer.setData(\"text/plain\", \"slide\")\n    state.slideDrag = updateSlideDragStart(s)(state.slideDrag)\n  }\n\n  const handleDragEnd = (ev) => {\n    ev.target.style.opacity = \"1\"\n    if (state.slideDrag.droppable) {\n      let _slide = updateSlideDragEnd(state.right().length)(s)\n\n      updateStateDragEnd(state.slideDrag)\n      return addSlideToShow(_slide)\n    }\n  }\n\n  return {\n    view: ({ attrs: { s, state, mdl } }) =>\n      m(\n        \".card\",\n        {\n          id: s.id,\n          draggable: mdl.isLoggedIn,\n          ondragstart: handleDragStart,\n          ondragend: handleDragEnd,\n        },\n        [\n          m(\"div.card-header\", [m(\"h1.title\", m(\"span\", take(15, s.title)))]),\n          mdl.isLoggedIn &&\n            m(\n              \".card-footer\",\n              m(RemoveLine, {\n                class: \"clarity\",\n                onclick: () => removeSlideTask(s.id),\n              }),\n              m(EditLine, {\n                class: \"clarity\",\n                onclick: () =>\n                  m.route.set(`/edit/${state.presentationId}/slide/${s.id}`),\n              })\n            ),\n        ]\n      ),\n  }\n}\n\nexport default Slide\n","import {\n  clone,\n  filter,\n  propEq,\n  prop,\n  without,\n  concat,\n  head,\n  sortBy,\n} from \"ramda\"\nimport SlidesModal from \"./slidesModal.js\"\nimport Slide from \"./Slide/component.js\"\nimport Preview from \"./Preview/component.js\"\nimport { loadSlides } from \"./model.js\"\nimport { log } from \"utils\"\n\nconst Slides = ({ attrs: { mdl } }) => {\n  const state = {\n    left: Stream([]),\n    right: Stream([]),\n    slideDrag: {\n      dragId: \"\",\n      dragging: false,\n      droppable: false,\n    },\n    previewDrag: {\n      drag: null,\n      drop: null,\n    },\n    presentationId: \"\",\n  }\n\n  const onError = log(\"error\")\n\n  const onSuccess = () => {\n    let slides = mdl.CurrentPresentation.Slides\n\n    state.left(filter(propEq(\"order\", 0), slides))\n\n    state.right(sortBy(prop(\"order\"), without(state.left(), slides)))\n\n    mdl.CurrentPresentation.slideShow = state.right()\n  }\n\n  const getSlides = ({ attrs: { mdl } }) => {\n    state.presentationId = m.route.param(\"id\")\n    return loadSlides(state.presentationId)(mdl).fork(onError, onSuccess)\n  }\n\n  const handleDragEnter = (ev) => {\n    ev.preventDefault()\n    state.bColor = true\n  }\n\n  const handleDragLeave = (ev) => {\n    ev.preventDefault()\n    state.slideDrag.dragging = false\n    state.slideDrag.droppable = false\n    state.bColor = false\n  }\n\n  const handleDrop = (ev) => {\n    ev.preventDefault()\n    let type = ev.dataTransfer.getData(\"text/plain\")\n    if (state.slideDrag.dragging) {\n      if (type == \"slide\") {\n        let item = head(\n          filter(propEq(\"id\", state.slideDrag.dragId), state.left())\n        )\n        state.slideDrag.droppable = true\n        item.order = state.right().length + 1\n        state.left(without([item], state.left()))\n        state.right(concat(state.right(), [item]))\n      } else {\n        let item = head(\n          filter(propEq(\"id\", state.slideDrag.dragId), state.right())\n        )\n      }\n    }\n  }\n\n  const handleDragOver = (ev) => {\n    ev.preventDefault()\n    let type = ev.dataTransfer.getData(\"text/plain\")\n    state.slideDrag.dragging = true\n    ev.dataTransfer.dropEffect = \"move\"\n  }\n\n  return {\n    oninit: getSlides,\n    view: ({ attrs: { mdl } }) => [\n      mdl.toggleModal\n        ? m(SlidesModal, {\n            slide: clone(mdl.SlideModel),\n            getSlides,\n            mdl,\n            pId: state.presentationId,\n          })\n        : \"\",\n      m(\".container.slides\", [\n        m(\n          `aside.left-drag ${state.left().length == 0 ? \".isDragging\" : \"\"}`,\n          {\n            style: {\n              overflowY: \"auto\",\n            },\n            onBeforeRemove: (vnode, done) => {\n              vnode.dom.addEventListener(\"animationend\", done)\n              vnode.dom.style.animation = \"fadeOut 1s\"\n            },\n          },\n          state.left().map((s) =>\n            m(Slide, {\n              key: s.id,\n              mdl,\n              getSlides,\n              s,\n              state,\n            })\n          )\n        ),\n\n        m(\n          `section.right-drag${state.slideDrag.dragging ? \".isDragging\" : \"\"}`,\n          {\n            style: {\n              height: \"90vh\",\n              overflowY: \"auto\",\n            },\n            onBeforeRemove: (vnode, done) => {\n              vnode.dom.addEventListener(\"animationend\", done)\n              vnode.dom.style.animation = \"fadeOut 1s\"\n            },\n            ondragleave: handleDragLeave,\n            ondrop: handleDrop,\n            ondragover: handleDragOver,\n            ondragenter: handleDragEnter,\n          },\n          state.right().map((s) => {\n            return m(Preview, {\n              key: s.id,\n              mdl,\n              getSlides,\n              s,\n              state,\n            })\n          })\n        ),\n      ]),\n    ],\n  }\n}\n\nexport default Slides\n","import { getQlTask } from \"utils\"\nimport { compose, lt, prop, gt, set, lensProp, subtract, path } from \"ramda\"\n\nconst toViewModel = (model) => (presentations) =>\n  (model.CurrentPresentation = presentations)\n\nexport const toStruct = (acc, item) => {\n  if (item.order > 0 && !acc.keys.has(item.id)) {\n    item.order = acc.keys.size + 1\n    acc.keys.add(item.id)\n    acc.values[item.order] = item\n    acc.items(Object.keys(acc.values))\n    return acc\n  }\n  return acc\n}\n\nconst orderOf = (slide) => prop(\"order\", slide)\n\nexport const forGreater = (removeSlide) => (checkSlide) =>\n  lt(orderOf(removeSlide), orderOf(checkSlide))\n\nexport const forLess = (removeSlide) => (checkSlide) =>\n  gt(orderOf(removeSlide), orderOf(checkSlide))\n\nexport const reduceOrder = (slide) =>\n  set(lensProp(\"order\", slide), subtract(orderOf(slide), 1), slide)\n\nexport const getId = (item) => prop(\"id\", item)\n\nconst resetOrder = (slide) => set(lensProp(\"order\", slide), 0, slide)\n\nexport const updateRemoveSlide = compose(Array.of, resetOrder)\n\nconst updateId = (slide) => (slideDrag) =>\n  set(lensProp(\"dragId\", slideDrag), prop(\"id\", slide), slideDrag)\n\nexport const updateSlideDragStart = (slide) =>\n  compose(updateId(slide), updateDrag)\n\nconst updateOrder = (length) => (slide) => set(lensProp(\"order\"), length, slide)\n\nexport const updateSlideDragEnd = (length) => compose(updateOrder(length))\n\nconst updateDrag = (state) => set(lensProp(\"dragging\", false, state))\n\nconst updateDrop = (state) => set(lensProp(\"droppable\", false, state))\n\nexport const updateStateDragEnd = compose(updateDrop, updateDrag)\n\nexport const loadSlides = (id) => (model) =>\n  getQlTask(\n    `{ presentation(where:{id:${JSON.stringify(id)}}){\n      id, title, Slides { id title content order }\n    } }`\n  )\n    .map(path([\"data\", \"presentation\"]))\n    .map(toViewModel(model))\n\nexport const saveSlideTask = ({ title, order, presentation_id }) => {\n  let q = `mutation {\n            updatePresentation(\n              where: {\n                id: ${JSON.stringify(presentation_id)}\n              }\n              data: {\n                  Slides:{\n                    create : {\n                      title: ${JSON.stringify(title)}\n                      content: \"\"\n                      order: ${JSON.stringify(order)}\n                    }\n                  }\n          }){\n    id title Slides { id title content order }\n  } }`\n\n  return getQlTask(q).map(path([\"data\", \"updatePresentation\", \"Slides\"]))\n}\n\nexport const deleteSlideTask = (presentation_id) => (id) => {\n  let q = `mutation {\n            updatePresentation(\n              where: {\n                id: ${JSON.stringify(presentation_id)}\n              }\n              data: {\n                  Slides:{\n                    delete : [{\n                      id: ${JSON.stringify(id)}\n                    }]\n                  }\n          }){\n    id title Slides { id title content order}\n  } }`\n\n  return getQlTask(q).map(path([\"data\", \"updatePresentation\", \"Slides\"]))\n}\n\nexport const updateSlideTask = (presentation_id) => (slides) => {\n  let qlSlides = slides.map(\n    (slide) =>\n      `{\n      where: {\n        id: ${JSON.stringify(slide.id)}\n      }\n      data: {\n        order: ${JSON.stringify(slide.order)}\n      }\n    }`\n  )\n\n  let q = `mutation {\n            updatePresentation(\n              where: {\n                id: ${JSON.stringify(presentation_id)}\n              }\n              data: {\n                Slides:{\n                  update : [${qlSlides}]\n                }\n              }\n            )\n          { id title Slides { id title content order } }\n        }`\n\n  return getQlTask(q).map(path([\"data\", \"updatePresentation\", \"Slides\"]))\n}\n","import { assoc } from \"ramda\"\nimport { saveSlideTask } from \"./model.js\"\nimport { Modal } from \"components/modal\"\n\nconst SlidesModal = ({ attrs: { pId, slide, getSlides, mdl } }) => {\n  const state = {\n    errors: \"\",\n    title: \"\",\n  }\n\n  const onError = (errors) => {\n    log(\"error\")(errors)\n    state.errors = errors\n  }\n\n  const onSuccess = () => {\n    getSlides({ attrs: { mdl } })\n    mdl.toggleModal(mdl, \"slides\")\n  }\n\n  const save = (e) => {\n    e.preventDefault()\n    let dto = assoc(\"presentation_id\", pId, assoc(\"title\", state.title, slide))\n    saveSlideTask(dto).fork(onError, onSuccess)\n  }\n\n  return {\n    view: () =>\n      m(Modal, {\n        onremove: () => {\n          state.title = \"\"\n          state.errors = \"\"\n        },\n        mdl: mdl,\n        id: \"slides\",\n        modalTitle: \"New Slide\",\n        modalContent: m(\"input\", {\n          value: state.title,\n          autofocus: true,\n          type: \"text\",\n          onkeyup: (e) => (state.title = e.target.value),\n        }),\n        modalFooter: m(\"button.card-btn\", { onclick: save }, \"add slide\"),\n      }),\n  }\n}\n\nexport default SlidesModal\n","import m from \"mithril\"\nimport { pluck } from \"ramda\"\nimport { animateEntranceRight } from \"utils\"\n\nconst ENDING = `<div class=\"endingContainer\">\n<h1 class=\"endingTitle\">THE END!</h1>\n<img class=\"endingImg\" id=\"ending\" src=\"https://imgur.com/uj15GJp.gif\" width=\"100%\" />\n</div>\n`\n\nconst SlideShow = ({ attrs: { mdl } }) => {\n  if (!mdl.CurrentPresentation.id) m.route.set(\"/presentations\")\n  const state = {\n    update: false,\n    key: undefined,\n    cursor: 0,\n    size: mdl.CurrentPresentation.slideShow.length || 0,\n    contents: pluck(\"content\", mdl.CurrentPresentation.slideShow) || 0,\n  }\n\n  const calcStatePosition = (x) =>\n    x > window.innerWidth / 2 ? \"right\" : \"left\"\n\n  const updateStatePosition = (x, state) =>\n    (state.key = calcStatePosition(x) == \"right\" ? \"ArrowRight\" : \"ArrowLeft\")\n\n  const nextSlide = () => {\n    if (state.cursor == state.size - 1) state.contents[state.cursor] = ENDING\n    else {\n      state.cursor++\n    }\n    return state\n  }\n\n  const prevSlide = () => {\n    state.cursor == 0 ? state.cursor : state.cursor--\n  }\n\n  const changeSlide = (key, target) => {\n    switch (key) {\n      case \"ArrowLeft\":\n        if (target.children) prevSlide(target)\n        break\n      case \"ArrowRight\":\n        if (target.children) nextSlide(target)\n        break\n      case \"ArrowUp\":\n        target.scrollBy(0, 100)\n        break\n      case \"ArrowDown\":\n        target.scrollBy(0, -100)\n        break\n    }\n  }\n\n  return {\n    dir: state.key,\n    oninit: (state.slide = state.contents[state.cursor]),\n    view: ({ attrs: { mdl } }) =>\n      m(\n        \".slideshow#slideshow\",\n        {\n          tabindex: 0,\n          onkeyup: ({ key, target }) => {\n            state.update = true\n            state.key = key\n            changeSlide(key, target)\n          },\n          onclick: ({ x, target }) => {\n            state.update = true\n            updateStatePosition(x, state)\n            return changeSlide(state.key, target)\n          },\n        },\n        m(\n          \".slidecard#slidecard\",\n          {\n            onmouseenter: ({ x, target }) => {\n              state.update = false\n              target.style.cursor = calcStatePosition(x)\n            },\n            onmouseleave: ({ x, target }) => {\n              state.update = false\n              ;(target.style.cursor = calcStatePosition(x)), target\n            },\n            onbeforeupdate: () =>\n              ![\"ArrowUp\", \"ArrowDown\"].includes(state.key) && state.update,\n            onupdate: ({ dom }) => {\n              dom.scrollIntoView({\n                block: \"start\",\n                inline: \"start\",\n              })\n              animateEntranceRight({ dom })\n            },\n          },\n          m.trust(mdl.markup.render(state.contents[state.cursor] || ENDING))\n        )\n      ),\n  }\n}\n\nexport default SlideShow\n","import sha256 from \"crypto-js/sha256\"\n\nexport const onlineUrl =\n  \"https://eu1.prisma.sh/boaz-blake-8951e1/mithril-presenter/dev\"\n\nexport const secure = (code) => sha256(code).toString()\n","import Task from \"data.task\"\nimport { onlineUrl, makeQuery } from \"./index.js\"\n\nexport const postQl = (query) =>\n  new Task((rej, res) =>\n    m\n      .request({\n        method: \"POST\",\n        url: `${onlineUrl}`,\n        withCredentials: false,\n        body: makeQuery(query),\n      })\n      .then(res, rej)\n  )\n\nconst postTask = (url) => (dto) =>\n  new Task((rej, res) =>\n    m\n      .request({\n        method: \"POST\",\n        url: `${url}`,\n        body: dto,\n        withCredentials: false,\n      })\n      .then(res, rej)\n  )\n\nconst putTask = (url) => ({ dto }) =>\n  new Task((rej, res) =>\n    m\n      .request({\n        method: \"PUT\",\n        url: `${onlineUrl}/${url}`,\n        body: dto,\n        withCredentials: false,\n      })\n      .then(res, rej)\n  )\n\nconst getTask = (url) =>\n  new Task((rej, res) =>\n    m\n      .request({\n        method: \"GET\",\n        url: `${onlineUrl}/${url}`,\n        withCredentials: false,\n      })\n      .then(res, rej)\n  )\n\nconst deleteTask = (url) => (id) =>\n  new Task((rej, res) =>\n    m\n      .request({\n        method: \"DELETE\",\n        url: `${onlineUrl}/${url}/${id}`,\n        withCredentials: false,\n      })\n      .then(res, rej)\n  )\n\nexport default { postTask, putTask, getTask, deleteTask, postQl }\n","import anime from \"animejs\"\n\nexport const animateSlideEntrance = ({ dom }) => {\n  return dom.animate(\n    [\n      { transform: \"translate3d(20%,0,0)\", opacity: 0 },\n      { transform: \"none\", opacity: 1 }\n    ],\n    {\n      duration: 650\n    }\n  )\n}\n\nexport const animateEntranceRight = ({ dom }) => {\n  return dom.animate(\n    [\n      {\n        animation: \"\",\n        transform: \"translate3d(100%,0,0)\",\n        scale: 2,\n        opacity: 0\n      },\n      {\n        animation: \"stretchRight 1s ease-in-out both\",\n        transform: \"none\",\n        opacity: 1,\n        scale: 1\n      }\n    ],\n    {\n      duration: 350\n    }\n  )\n}\n\nexport const animateChildEntrance = ({ dom }) => {\n  let children = [...dom.children]\n\n  return children.map((child, index) => {\n    setTimeout(() => {\n      child.animate(\n        [\n          { transform: \"translate3d(0,-100%,0)\", opacity: 0 },\n          { transform: \"none\", opacity: 1 }\n        ],\n        {\n          duration: 850\n        }\n      )\n    }, (index + 1) * 200)\n  })\n}\n\nexport const animateExit = (dom) => {\n  let children = [...dom.children]\n\n  let anim = animate([\n    { transform: \"none\", opacity: 1 },\n    { transform: \"translate3d(25%,100%,0)\", opacity: 0 }\n  ])\n\n  let waapi = children.map((child) =>\n    child.animate(anim, {\n      duration: 850\n    })\n  )\n\n  return new Promise((resolve) => {\n    waapi.onfinish = function(e) {\n      resolve()\n    }\n  })\n}\n\nexport const animateFadeIn = ({ dom }) => {\n  let children = [...dom.children]\n  children.map((child, index) => {\n    child.style.opacity = 0\n    child.style.transition = \"opacity .4s ease-in-out\"\n\n    return setTimeout(() => {\n      child.style.opacity = 1\n    }, (index + 1) * 200)\n  })\n}\n\nexport const animateFadeOut = ({ dom }) => {\n  let anim = [\n    { transition: \"opacity .4s ease-in-out\" },\n    { transform: \"none\", opacity: 1 },\n    { transform: \"translate3d(25%,100%,0)\", opacity: 0 }\n  ]\n  let waapi = dom.animate(anim, {\n    duration: 850\n  })\n\n  return new Promise((resolve) => {\n    waapi.onfinish = function(e) {\n      resolve()\n    }\n  })\n}\n\nexport const animeEntrance = ({ dom }) => {\n  let children = [...dom.children]\n  const res = children.map((el) =>\n    anime({\n      target: el,\n      easing: \"easeInQuad\",\n      translateX: 250,\n      offset: 0\n    })\n  )\n\n  return res\n}\n\nexport const bounceEntrance = ({ dom }) => {\n  return dom.animate({\n    animation: \"animation 1000ms linear both\",\n    keyframes: {\n      \"0%\": {\n        transform: \"matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)\"\n      },\n      \"3.4%\": {\n        transform:\n          \"matrix3d(1.316, 0, 0, 0, 0, 1.407, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)\"\n      },\n      \"4.7%\": {\n        transform:\n          \"matrix3d(1.45, 0, 0, 0, 0, 1.599, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)\"\n      },\n      \"6.81%\": {\n        transform:\n          \"matrix3d(1.659, 0, 0, 0, 0, 1.893, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)\"\n      },\n      \"9.41%\": {\n        transform:\n          \"matrix3d(1.883, 0, 0, 0, 0, 2.168, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)\"\n      },\n      \"10.21%\": {\n        transform:\n          \"matrix3d(1.942, 0, 0, 0, 0, 2.226, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)\"\n      },\n      \"13.61%\": {\n        transform:\n          \"matrix3d(2.123, 0, 0, 0, 0, 2.332, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)\"\n      },\n      \"14.11%\": {\n        transform:\n          \"matrix3d(2.141, 0, 0, 0, 0, 2.331, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)\"\n      },\n      \"17.52%\": {\n        transform:\n          \"matrix3d(2.208, 0, 0, 0, 0, 2.239, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)\"\n      },\n      \"18.72%\": {\n        transform:\n          \"matrix3d(2.212, 0, 0, 0, 0, 2.187, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)\"\n      },\n      \"21.32%\": {\n        transform:\n          \"matrix3d(2.196, 0, 0, 0, 0, 2.069, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)\"\n      },\n      \"24.32%\": {\n        transform:\n          \"matrix3d(2.151, 0, 0, 0, 0, 1.96, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)\"\n      },\n      \"25.23%\": {\n        transform:\n          \"matrix3d(2.134, 0, 0, 0, 0, 1.938, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)\"\n      },\n      \"29.03%\": {\n        transform:\n          \"matrix3d(2.063, 0, 0, 0, 0, 1.897, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)\"\n      },\n      \"29.93%\": {\n        transform:\n          \"matrix3d(2.048, 0, 0, 0, 0, 1.899, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)\"\n      },\n      \"35.54%\": {\n        transform:\n          \"matrix3d(1.979, 0, 0, 0, 0, 1.962, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)\"\n      },\n      \"36.74%\": {\n        transform:\n          \"matrix3d(1.972, 0, 0, 0, 0, 1.979, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)\"\n      },\n      \"41.04%\": {\n        transform:\n          \"matrix3d(1.961, 0, 0, 0, 0, 2.022, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)\"\n      },\n      \"44.44%\": {\n        transform:\n          \"matrix3d(1.966, 0, 0, 0, 0, 2.032, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)\"\n      },\n      \"52.15%\": {\n        transform:\n          \"matrix3d(1.991, 0, 0, 0, 0, 2.006, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)\"\n      },\n      \"59.86%\": {\n        transform:\n          \"matrix3d(2.006, 0, 0, 0, 0, 1.99, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)\"\n      },\n      \"63.26%\": {\n        transform:\n          \"matrix3d(2.007, 0, 0, 0, 0, 1.992, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)\"\n      },\n      \"75.28%\": {\n        transform:\n          \"matrix3d(2.001, 0, 0, 0, 0, 2.003, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)\"\n      },\n      \"85.49%\": {\n        transform:\n          \"matrix3d(1.999, 0, 0, 0, 0, 2, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)\"\n      },\n      \"90.69%\": {\n        transform:\n          \"matrix3d(1.999, 0, 0, 0, 0, 1.999, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)\"\n      },\n      \"100%\": {\n        transform: \"matrix3d(2, 0, 0, 0, 0, 2, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)\"\n      }\n    }\n  })\n}\n","export * from \"./animations.js\"\nexport * from \"./requests.js\"\nexport * from \"./.secret.js\"\nexport * from \"./Tasks.js\"\n\nconst makeQuery = (string) => JSON.parse(JSON.stringify(string))\n\nconst repeat = (n) => (f) => (x) => {\n  let m = n\n  while (true) {\n    if (m === 0) return x\n    else (m = m - 1), (x = f(x))\n  }\n}\n\nconst wait = (n) => (f) => (x) => {\n  let m = n\n  while (true) {\n    if (m === 0) return x\n    else (m = m - 1), (x = f(x))\n  }\n}\n\nconst log = (m) => (v) => {\n  console.log(m, v)\n  return v\n}\n\nconst viewModelMap = (signature) => {\n  var _map = {}\n  return function (key) {\n    if (!_map[key]) {\n      _map[key] = {}\n      for (var prop in signature) _map[key][prop] = Stream(signature[prop]())\n    }\n    return _map[key]\n  }\n}\nexport { viewModelMap, log, repeat, wait, makeQuery }\n","import httpTasks from \"./Tasks.js\"\n\nexport const findPresentationsTask = () => httpTasks.getTask(\"presentations\")\n\nexport const getQlTask = (query) => httpTasks.postQl({ query })\n\nexport const savePresentationTask = (dto) =>\n  httpTasks.postTask(`presentations`)({\n    dto,\n  })\n\nexport const deletePresentationsTask = (id) =>\n  httpTasks.deleteTask(\"presentations\")(id)\n\nexport const findSlidesTask = (id) =>\n  httpTasks.getTask(`presentations/${id}/slides`)\n\nexport const saveSlideTask = (dto) => httpTasks.postTask(`slides`)({ dto })\n\nexport const updateSlideTask = (id) => (dto) =>\n  httpTasks.putTask(`slides/${id}`)({ dto })\n\nexport const deleteSlideTask = (id) => httpTasks.deleteTask(\"slides\")(id)\n\nexport const loadSlideTask = (id) => httpTasks.getTask(`slides/${id}`)\n"]}