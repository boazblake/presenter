{"version":3,"sources":["app/Models.js","app/components/layout.js","app/components/loader.js","app/components/modal.js","app/components/toolbar.js","app/editor/component.js","app/editor/model.js","app/index.js","app/initialize.js","app/presentations/Presentation/component.js","app/presentations/Presentation/model.js","app/presentations/component.js","app/presentations/model.js","app/presentations/presentationModal.js","app/slides/Preview/component.js","app/slides/Slide/component.js","app/slides/component.js","app/slides/model.js","app/slides/slidesModal.js","app/slideshow/component.js","app/utils/.secret.js","app/utils/Tasks.js","app/utils/animations.js","app/utils/index.js","app/utils/requests.js"],"names":["hljs","registerLanguage","javascript","markup","MarkdownIt","html","xhtmlOut","breaks","langPrefix","linkify","typographer","quotes","use","highlightjs","emoji","sub","sup","ins","footnote","deflist","abbr","arrows","SlideModel","title","contents","order","presentation_id","Slides","Presentations","SlideShowStruct","keys","Set","values","items","Stream","CurrentPresentation","id","slideShow","getProfile","w","caputerScreen","window","open","c","document","cloneNode","card","getElementById","styles","stylesheet","body","appendChild","style","print","close","Models","profile","innerWidth","modals","presentations","slides","auth","toggleModal","mdl","modal","code","isLoggedIn","Layout","view","children","attrs","m","Toolbar","Loader","isActive","Modal","modalTitle","modalContent","modalFooter","onremove","onclick","AuthModal","state","verifyCode","e","sessionStorage","setItem","oninit","http","postTask","fork","value","autofocus","type","onkeyup","target","login","removeItem","toggleModalSwitch","route","get","split","context","length","toPresentations","Link","selector","class","href","toSlides","toSlideShow","printToPDF","preventDefault","navView","page","actionView","Button","action","label","Editor","presentationId","slide","content","_","set","onError","error","log","onSuccess","getSlide","param","updateInput","input","save","oncreate","placeholder","oninput","trust","render","loadSlide","q","JSON","stringify","map","editSlide","root","getItem","makeRoutes","onmatch","SlideShow","addEventListener","require","Presentation","getSlidesAndStartSlideShow","filter","p","sort","a","b","task","models","deleted","authDeleteTask","confirm","Task","of","rejected","removePresTask","pId","chain","deletePresentationsTask","margin","height","position","PlayLine","EditLine","RemoveLine","stopPropagation","loadSlides","errors","dto","findPresentations","PresentationModal","presentationModel","PresentationModel","dom","onBeforeRemove","vnode","done","animation","key","toViewModel","data","getPresentations","savePresentationTask","push","SlidePosition","update","updateSlidesPosition","dir","prevSlide","x","nextSlide","disabled","Preview","getSlides","s","updateAndSaveSlideTask","removeSlideTask","tail","reduceOrder","right","removeSlide","updateList","handleDragStart","ev","opacity","dataTransfer","effectAllowed","setData","previewDrag","drag","handleDragOver","drop","handleDragLeave","handleDrop","handleDragEnd","slideDrag","dragging","start","end","dragged","dropped","draggable","ondragstart","ondragend","ondragover","ondrop","ondragleave","top","Slide","addSlideToShow","dragId","droppable","_slide","left","handleDragEnter","bColor","getData","item","dropEffect","SlidesModal","overflowY","ondragenter","model","toStruct","acc","has","size","add","Object","orderOf","forGreater","checkSlide","forLess","getId","resetOrder","updateRemoveSlide","Array","updateId","updateSlideDragStart","updateDrag","updateOrder","updateSlideDragEnd","updateDrop","updateStateDragEnd","saveSlideTask","deleteSlideTask","updateSlideTask","qlSlides","Ending","src","width","updateCursor","pageX","undefined","current","calcStatePosition","updateStatePosition","scroll","scrollIntoView","changeSlide","scrollBy","tabindex","onmousemove","onbeforeupdate","includes","onupdate","block","inline","onlineUrl","secure","toString","postQl","query","rej","res","request","method","url","withCredentials","then","putTask","getTask","deleteTask","animateSlideEntrance","animate","transform","duration","animateEntranceRight","scale","animateChildEntrance","child","index","setTimeout","animateExit","anim","waapi","Promise","resolve","onfinish","animateFadeIn","transition","animateFadeOut","animeEntrance","el","easing","translateX","offset","bounceEntrance","keyframes","makeQuery","string","parse","repeat","n","f","wait","v","console","viewModelMap","signature","_map","prop","findPresentationsTask","httpTasks","getQlTask","findSlidesTask","loadSlideTask"],"mappings":"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","file":"docs/app.js","sourcesContent":["import MarkdownIt from \"markdown-it\"\nimport highlightjs from \"markdown-it-highlightjs\"\nimport emoji from \"markdown-it-emoji\"\nimport sub from \"markdown-it-sub\"\nimport sup from \"markdown-it-sup\"\nimport ins from \"markdown-it-ins\"\nimport footnote from \"markdown-it-footnote\"\nimport deflist from \"markdown-it-deflist\"\nimport abbr from \"markdown-it-abbr\"\n// import imsize from \"markdown-it-imsize\"\nimport arrows from \"markdown-it-smartarrows\"\nimport hljs from \"highlight.js\"\nimport javascript from \"highlight.js/lib/languages/javascript\"\n// import printJS from \"print-js\"\nhljs.registerLanguage(\"javascript\", javascript)\n\nconst markup = new MarkdownIt({\n  html: true, // Enable HTML tags in source\n  xhtmlOut: true, // Use '/' to close single tags (<br />).\n  // This is only for full CommonMark compatibility.\n  breaks: true, // Convert '\\n' in paragraphs into <br>\n  langPrefix: \"\", // CSS language prefix for fenced blocks. Can be\n  // useful for external highlighters.\n  linkify: true, // Autoconvert URL-like text to links\n\n  // Enable some language-neutral replacement + quotes beautification\n  typographer: true,\n\n  // Double + single quotes replacement pairs, when typographer enabled,\n  // and smartquotes on. Could be either a String or an Array.\n  //\n  // For example, you can use '' for Russian, '' for German,\n  // and ['\\xA0', '\\xA0', '\\xA0', '\\xA0'] for French (including nbsp).\n  quotes: \"\",\n\n  // Highlighter function. Should return escaped HTML,\n  // or '' if the source string is not changed and should be escaped externally.\n  // If result starts with <pre... internal wrapper is skipped.\n  // highlight: (str, language) => ,\n})\n  .use(highlightjs, { hljs })\n  .use(emoji)\n  .use(sub)\n  .use(sup)\n  .use(ins)\n  .use(footnote)\n  .use(deflist)\n  .use(abbr)\n  // .use(imsize, { autofill: true })\n  .use(arrows)\n\nconst SlideModel = {\n  title: \"\",\n  contents: \"\",\n  order: 0,\n  presentation_id: \"\",\n}\n\nconst Slides = []\n\nconst Presentations = []\n\nconst SlideShowStruct = {\n  keys: new Set(),\n  values: {},\n  items: Stream([]),\n}\n\nconst CurrentPresentation = {\n  title: \"\",\n  id: \"\",\n  slideShow: [],\n  Slides,\n}\n\nconst getProfile = (w) => {\n  if (w < 668) return \"phone\"\n  if (w < 920) return \"tablet\"\n  return \"desktop\"\n}\n\nconst caputerScreen = () => {\n  let w = window.open()\n  let c = document.cloneNode(document)\n  let card = c.getElementById(\"slidecard\")\n  let styles = card.stylesheet\n  w.document.body.appendChild(card)\n  w.document.body.style = styles\n  w.print()\n  w.close()\n}\n\nconst Models = {\n  caputerScreen,\n  markup,\n  profile: getProfile(window.innerWidth),\n  SlideShowStruct,\n  Presentations,\n  CurrentPresentation,\n  SlideModel,\n  modals: {\n    presentations: false,\n    slides: false,\n    auth: false,\n  },\n  toggleModal: (mdl, modal) => (mdl.modals[modal] = !mdl.modals[modal]),\n  code: null,\n  isLoggedIn: false,\n}\n\nexport default Models\n","import Toolbar from \"./toolbar.js\"\n\nexport const Layout = {\n  view: ({ children, attrs: { mdl } }) =>\n    m(\".container\", m(Toolbar, { mdl }), children),\n}\n","export const Loader = () =>\n  m(\".lds-roller\", [\n    m(\".\"),\n    m(\".\"),\n    m(\".\"),\n    m(\".\"),\n    m(\".\"),\n    m(\".\"),\n    m(\".\"),\n    m(\".\")\n  ])\n","const isActive = (mdl, id) => (mdl.modals[id] ? \"active\" : \"\")\n\nexport const Modal = ({ attrs: { mdl } }) => {\n  return {\n    view: ({\n      attrs: { id, modalTitle, modalContent, modalFooter, onremove },\n    }) =>\n      mdl.modals[id] &&\n      m(\n        `.modal.${isActive(mdl, id)}[id=${id}]`,\n        {\n          onremove,\n        },\n        m(\"a.modal-overlay[href='#'][aria-label='Close']\", {\n          onclick: () => mdl.toggleModal(mdl, id),\n        }),\n        m(\".modal-container\", [\n          m(\".modal-header\", [\n            m(\"button.btn.btn-clear.float-right[aria-label='Close']\", {\n              onclick: () => mdl.toggleModal(mdl, id),\n            }),\n            m(\".modal-title.h5\", modalTitle),\n          ]),\n          m(\".modal-body\", m(\".content\", modalContent)),\n          m(\".modal-footer\", modalFooter),\n        ])\n      ),\n  }\n}\n","import { isEmpty, split, view, lensProp } from \"ramda\"\nimport { log, secure } from \"utils\"\nimport http from \"utils/Tasks.js\"\nimport { Modal } from \"./modal.js\"\n\nconst AuthModal = ({ attrs: { mdl } }) => {\n  const state = { code: \"\" }\n\n  const verifyCode = (state) => (e) => {\n    if (secure(state.code) === mdl.code) {\n      mdl.isLoggedIn = true\n      mdl.toggleModal(mdl, \"auth\")\n      sessionStorage.setItem(\"code\", true)\n    }\n  }\n\n  return {\n    oninit: () => {\n      http\n        .postTask(\"https://ancient-headland-12919.herokuapp.com/auth\")()\n        .fork(log(\"e\"), (code) => (mdl.code = code))\n    },\n    view: () =>\n      m(Modal, {\n        mdl,\n        id: \"auth\",\n        modalTitle: \"Verify Code\",\n        modalContent: m(\"input.modal-input\", {\n          value: state.code,\n          autofocus: true,\n          type: \"text\",\n          onkeyup: (e) => (state.code = e.target.value),\n        }),\n        modalFooter: m(\n          \"button.card-btn\",\n          { onclick: verifyCode(state) },\n          \"Login\"\n        ),\n      }),\n  }\n}\n\nconst login = (mdl) =>\n  mdl.isLoggedIn\n    ? m(\n        \"a.btn.btn-link\",\n        {\n          onclick: () => {\n            mdl.isLoggedIn = false\n            sessionStorage.removeItem(\"code\")\n          },\n        },\n        \"Logout\"\n      )\n    : m(\n        \"a.btn.btn-link\",\n        {\n          onclick: () => {\n            mdl.toggleModal(mdl, \"auth\")\n          },\n        },\n        \"Login\"\n      )\n\nconst toggleModalSwitch = (mdl) =>\n  mdl.isLoggedIn &&\n  m(\n    \"a.btn.btn-link\",\n    {\n      onclick: () => {\n        let route = m.route.get().split(\"/\")\n        let context = route[route.length - 1]\n        mdl.toggleModal(mdl, context)\n      },\n    },\n    \"Add New\"\n  )\n\nconst toPresentations = [\n  m(\n    m.route.Link,\n    { selector: \"a\", class: \"btn btn-link\", href: \"/presentations\" },\n    \"Presentations\"\n  ),\n]\n\nconst toSlides = (mdl) => [\n  mdl.isLoggedIn &&\n    m(\n      m.route.Link,\n      {\n        selector: \"a\",\n        class: \"btn btn-link\",\n        href: `/presentation/${mdl.CurrentPresentation.id}/slides`,\n      },\n      \"slides\"\n    ),\n]\n\nconst toSlideShow = (mdl) =>\n  mdl.CurrentPresentation &&\n  !isEmpty(mdl.CurrentPresentation.slideShow) &&\n  m(\n    m.route.Link,\n    {\n      selector: \"a\",\n      class: \"btn btn-link\",\n      href: `/slideshow/${mdl.CurrentPresentation.id}`,\n    },\n    \"Slide Show\"\n  )\n\nconst printToPDF = (mdl) =>\n  m(\n    m.route.Link,\n    {\n      selector: \"a\",\n      class: \"btn btn-link\",\n      onclick: (e) => {\n        e.preventDefault()\n        mdl.caputerScreen()\n      },\n    },\n    \"Print Slide\"\n  )\n\nconst navView = (mdl) => {\n  let page = view(lensProp(1), split(\"/\", m.route.get()))\n  switch (page) {\n    case \"presentation\":\n      return [toPresentations, toSlideShow(mdl)]\n      break\n\n    case \"slideshow\":\n      return [toPresentations, toSlides(mdl)]\n      break\n\n    case \"slides\":\n      return [toPresentations, toSlideShow(mdl)]\n      break\n\n    case \"edit\":\n      return [toPresentations, toSlides(mdl), toSlideShow(mdl)]\n      break\n    default:\n  }\n}\n\nconst actionView = (mdl) => {\n  let page = view(lensProp(1), split(\"/\", m.route.get()))\n  switch (page) {\n    case \"presentations\":\n      return [login(mdl), toggleModalSwitch(mdl)]\n      break\n    case \"presentation\":\n      return [login(mdl), toggleModalSwitch(mdl)]\n      break\n    case \"slideshow\":\n      return [login(mdl), printToPDF(mdl)]\n      break\n    default:\n  }\n}\n\nconst Toolbar = ({ attrs: { mdl } }) => {\n  return {\n    view: ({ attrs: { mdl } }) =>\n      m(\n        \".navbar\",\n        m(\".navbar-section\", navView(mdl)),\n        m(\".navbar-section\", actionView(mdl)),\n        mdl.modals.auth && m(AuthModal, { mdl })\n      ),\n  }\n}\n\nexport default Toolbar\n","import { loadSlide, editSlide } from \"./model.js\"\nimport Loader from \"components\"\n\nconst Button = {\n  view: ({ attrs: { action, label } }) =>\n    m(\n      \"button.card-btn\",\n      {\n        onclick: action\n      },\n      label\n    )\n}\n\nconst Editor = ({ attrs: { mdl } }) => {\n  let state = {\n    presentationId: \"\",\n    slide: { title: \"\", content: \"\", id: \"\" }\n  }\n\n  const toSlides = (_) =>\n    m.route.set(`/presentation/${state.presentationId}/slides`)\n\n  const onError = (error) => log(\"error\")(error)\n\n  const onSuccess = (slide) => {\n    state.slide = slide\n  }\n\n  const getSlide = () => {\n    state.slide.id = m.route.param(\"id\")\n    state.presentationId = m.route.param(\"pid\")\n    return loadSlide(state.slide.id).fork(onError, onSuccess)\n  }\n\n  const updateInput = (input) => (e) => (state.slide[input] = e.target.value)\n\n  const save = (e) => {\n    e.preventDefault()\n\n    editSlide(state.slide).fork(onError, () => toSlides())\n  }\n\n  return {\n    oncreate: getSlide(),\n    view: () => {\n      return m(\".container.editor\", [\n        m(\n          \".editor-left\",\n          m(\".card.follow\", [\n            m(\".card-header\", [\n              m(\".card-footer\", [\n                m(Button, { action: save, label: \"Save\" }),\n                m(Button, { action: toSlides, label: \"Cancel\" })\n              ]),\n              m(\"input.editor-input\", {\n                type: \"text\",\n                placeholder: \"Slide Title\",\n                oninput: updateInput(\"title\"),\n                value: state.slide.title\n              })\n            ]),\n            m(\"textarea.editor-text\", {\n              oninput: updateInput(\"content\"),\n              value: state.slide.content\n            }),\n          ])\n        ),\n        m(\n          \".editor-right\",\n          m.trust(mdl.markup.render(state.slide.content || \"\"))\n        )\n      ])\n    }\n  }\n}\n\nexport default Editor\n","import { getQlTask } from \"utils\"\nimport { path } from \"ramda\"\n\nexport const loadSlide = id => {\n  let q = `{ slide(where:{id:${JSON.stringify(id)}}){\n              id content title\n            }\n          }`\n  return getQlTask(q).map(path([\"data\", \"slide\"]))\n}\n\nexport const editSlide = ({ id, title, content }) => {\n  let q = `mutation {\n            updateSlide(\n              data: {\n                title: ${JSON.stringify(title)}\n                content: ${JSON.stringify(content)}\n              }\n              where: {\n                id: ${JSON.stringify(id)}\n              }) {\n                id\n                title\n              }\n        }`\n\n  return getQlTask(q).map(path([\"data\", \"updatePresentation\", \"Slides\"]))\n}\n","const root = document.body\nimport { Layout } from \"./components/layout.js\"\n\nimport Presentations from \"./presentations/component.js\"\nimport Slides from \"./slides/component.js\"\nimport Editor from \"./editor/component.js\"\nimport SlideShow from \"./slideshow/component.js\"\nimport Models from \"./Models.js\"\n\nif (sessionStorage.getItem(\"code\")) {\n  Models.isLoggedIn = true\n}\n\nconst makeRoutes = (mdl) => {\n  return {\n    \"/presentations\": {\n      onmatch: () => {\n        mdl.CurrentPresentation = {\n          title: \"\",\n          id: \"\",\n          slideShow: [],\n          Slides: [],\n        }\n      },\n      render: () => m(Layout, { mdl }, m(Presentations, { mdl })),\n    },\n    \"/presentation/:id/slides\": {\n      onmatch: () => mdl.isLoggedIn || m.route.set(m.route.get()),\n      render: () => m(Layout, { mdl }, m(Slides, { mdl })),\n    },\n    \"/edit/:pid/slide/:id\": {\n      onmatch: () => mdl.isLoggedIn || m.route.set(m.route.get()),\n      render: () => m(Layout, { mdl }, m(Editor, { mdl })),\n    },\n    \"/slideshow/:id\": {\n      render: () => m(Layout, { mdl }, m(SlideShow, { mdl })),\n    },\n  }\n}\n\nm.route(root, \"/presentations\", makeRoutes(Models))\n","document.addEventListener(\"DOMContentLoaded\", () => require(\"./index.js\"))\n","import { log } from \"utils\"\nimport { compose, propEq, without, sortBy, filter } from \"ramda\"\nimport { deletePresentationsTask } from \"../model.js\"\nimport Task from \"data.task\"\nimport {\n  EditLine,\n  PlayLine,\n  RemoveLine,\n} from \"@mithril-icons/clarity/cjs/index\"\nimport { loadSlides } from \"./model.js\"\n\nconst Presentation = ({ attrs: { mdl } }) => {\n  const getSlidesAndStartSlideShow = (id) => {\n    const onSuccess = (slides) => {\n      mdl.CurrentPresentation = slides\n      mdl.CurrentPresentation.slideShow = mdl.CurrentPresentation.Slides.filter(\n        (p) => p.order > 0\n      ).sort((a, b) => a.order - b.order)\n      m.route.set(`/slideshow/${id}`)\n    }\n\n    const onError = log(\"e\")\n\n    loadSlides(id).fork(onError, onSuccess)\n  }\n\n  const onError = (task) => (error) => log(`error with ${task}: `)(error)\n  const onSuccess = (models) => (deleted) => {\n    return (models.Presentations = without([deleted], models.Presentations))\n  }\n\n  const authDeleteTask = (id) =>\n    window.confirm(\"Are you sure you want to delete?\")\n      ? Task.of(id)\n      : Task.rejected(\"user denied req\")\n\n  const removePresTask = (pId) =>\n    authDeleteTask(pId)\n      .chain(deletePresentationsTask)\n      .fork(onError(\"deleting\"), onSuccess(mdl))\n\n  return {\n    view: ({ attrs: { title, id, mdl } }) =>\n      m(\n        \".card.column.col-3\",\n        { style: { margin: \"10px\" } },\n        m(\n          \".tile\",\n          {\n            style: { height: \"100px\" },\n          },\n          m(\".tile-content\", title),\n          m(\n            \".tile-action\",\n            {\n              style: {\n                position: \"relative\",\n              },\n            },\n            m(PlayLine, {\n              class: \"clarity\",\n              onclick: () => getSlidesAndStartSlideShow(id),\n            }),\n\n            mdl.isLoggedIn && [\n              m(EditLine, {\n                class: \"clarity\",\n                onclick: () => m.route.set(`/presentation/${id}/slides`),\n              }),\n              m(RemoveLine, {\n                class: \"clarity\",\n                onclick: (e) => {\n                  e.stopPropagation()\n                  removePresTask(id)\n                },\n              }),\n            ]\n          )\n        )\n      ),\n  }\n}\n\nexport default Presentation\n","import { path } from \"ramda\"\nimport { getQlTask } from \"utils\"\n\nexport const loadSlides = (id) =>\n  getQlTask(\n    `{ presentation(where:{id:${JSON.stringify(id)}}){\n    id, title, Slides { id title content order }\n  } }`\n  ).map(path([\"data\", \"presentation\"]))\n","import { clone } from \"ramda\"\nimport { animateFadeIn, log } from \"utils\"\nimport PresentationModal from \"./presentationModal.js\"\nimport Presentation from \"./Presentation/component.js\"\nimport { getPresentations } from \"./model.js\"\n\nconst Presentations = () => {\n  const state = {\n    errors: null,\n    title: \"\",\n  }\n\n  const onError = (error) => {\n    log(\"error\")(error)\n    state.error = error\n  }\n\n  const onSuccess = (mdl) => (dto) => (mdl.Presentations = dto)\n\n  const findPresentations = ({ attrs: { mdl } }) =>\n    getPresentations().fork(onError, onSuccess(mdl))\n\n  return {\n    oninit: findPresentations,\n\n    view: ({ attrs: { mdl } }) => [\n      mdl.modals.presentations &&\n        m(PresentationModal, {\n          onremove: () => {\n            state.title = \"\"\n            state.errors = null\n          },\n          mdl,\n          state,\n          presentations: mdl.Presentations,\n          presentationModel: clone(mdl.PresentationModel),\n        }),\n\n      m(\n        \".container.columns\",\n        {\n          oncreate: ({ dom }) => animateFadeIn({ dom }),\n          onBeforeRemove: (vnode, done) => {\n            vnode.dom.addEventListener(\"animationend\", done)\n            vnode.dom.style.animation = \"fadeOut 1s\"\n          },\n        },\n        [\n          mdl.Presentations &&\n            mdl.Presentations.map(({ title, id }) =>\n              m(Presentation, {\n                key: id,\n                id,\n                title,\n                mdl,\n              })\n            ),\n        ]\n      ),\n    ],\n  }\n}\n\nexport default Presentations\n","import { getQlTask, log } from \"utils\"\nimport { path } from \"ramda\"\n\nconst toViewModel = ({ data, errors }) => {\n  log(\"errors\")(errors)\n  return { data, errors }\n}\n\nexport const getPresentations = () =>\n  getQlTask(`query {\n  presentations{ id, title}\n}`).map(path([\"data\", \"presentations\"]))\n\nexport const savePresentationTask = (state) => {\n  const q = `mutation {\n    createPresentation(data: {title: ${JSON.stringify(state.title)}})\n    { title id}\n  }`\n  return getQlTask(q).map(path([\"data\", \"createPresentation\"]))\n}\n\nexport const deletePresentationsTask = (id) => {\n  const q = `mutation {\n    deletePresentation(where: {id: ${JSON.stringify(id)}})\n    { title id}\n  }`\n  return getQlTask(q).map(path([\"data\", \"deletePresentation\"]))\n}\n","import { savePresentationTask } from \"./model.js\"\nimport { log } from \"utils\"\nimport { Modal } from \"components/modal\"\n\nconst PresentationModal = ({\n  attrs: { state, mdl, presentations, onremove },\n}) => {\n  const onError = (errors) => {\n    log(\"error\")(errors)\n    state.errors = errors\n    toggleModal()\n  }\n  const onSuccess = (p) => {\n    state.title = \"\"\n    state.errors = null\n    presentations.push(p)\n    mdl.toggleModal(mdl, \"presentations\")\n  }\n\n  const save = (e) => {\n    e.preventDefault()\n    savePresentationTask(state).fork(onError, onSuccess)\n  }\n\n  return {\n    view: () =>\n      m(Modal, {\n        onremove,\n        mdl: mdl,\n        id: \"presentations\",\n        modalTitle: \"New Presentation\",\n        modalContent: m(\"input\", {\n          value: state.title,\n          autofocus: true,\n          type: \"text\",\n          onkeyup: (e) => (state.title = e.target.value),\n        }),\n        modalFooter: m(\n          \"button.card-btn\",\n          { onclick: save },\n          \"create presentation\"\n        ),\n      }),\n  }\n}\n\nexport default PresentationModal\n","import { concat, eqProps, compose, filter, map, propEq, head } from \"ramda\"\nimport { log, animateFadeIn } from \"utils\"\nimport {\n  forGreater,\n  reduceOrder,\n  updateRemoveSlide,\n  updateSlideTask,\n} from \"../model.js\"\nimport { RemoveLine, EditLine } from \"@mithril-icons/clarity/cjs\"\n\nconst SlidePosition = ({ attrs: { update } }) => {\n  const updateSlidesPosition = (dir, slides, slide) => {\n    switch (dir) {\n      case \"left\":\n        let prevSlide = slides.filter((x) => x.order == slide.order - 1)[0]\n        prevSlide.order++\n        slide.order--\n        update([prevSlide, slide])\n        break\n      case \"right\":\n        let nextSlide = slides.filter((x) => x.order == slide.order + 1)[0]\n        slide.order++\n        nextSlide.order--\n        update([nextSlide, slide])\n        break\n    }\n  }\n\n  return {\n    view: ({ attrs: { slides, slide, dir } }) =>\n      m(\n        `button.s-circle`,\n        {\n          disabled:\n            (dir == \"right\" && slide.order == slides.length) ||\n            (dir == \"left\" && slide.order == 1),\n          onclick: () => updateSlidesPosition(dir, slides, slide),\n        },\n        m(`i.icon icon-arrow-${dir}`)\n      ),\n  }\n}\n\nconst Preview = ({ attrs: { getSlides, mdl, s, key, state } }) => {\n  const onError = (task) => (error) => log(`error with ${task}`)(error)\n\n  const onSuccess = (_) => getSlides({ attrs: { mdl } })\n\n  const updateAndSaveSlideTask = (slides) => {\n    return updateSlideTask(mdl.CurrentPresentation.id)(slides).fork(\n      onError(\"updating\"),\n      onSuccess\n    )\n  }\n\n  const removeSlideTask = (s) => {\n    let tail = compose(map(reduceOrder), filter(forGreater(s)))(state.right())\n    let removeSlide = updateRemoveSlide(s)\n\n    let updateList = concat(removeSlide, tail)\n\n    updateAndSaveSlideTask(updateList)\n  }\n\n  const handleDragStart = (ev) => {\n    ev.target.style.opacity = \"0.4\"\n    ev.dataTransfer.effectAllowed = \"move\"\n    ev.dataTransfer.setData(\"text/plain\", \"preview\")\n    state.previewDrag.drag = head(filter(propEq(\"id\", s.id), state.right()))\n  }\n\n  const handleDragOver = (ev) => {\n    ev.preventDefault()\n\n    if (state.previewDrag.drag) state.previewDrag.drop = s\n  }\n\n  const handleDragLeave = (ev) => {\n    ev.preventDefault()\n    state.previewDrag.drop = null\n  }\n\n  const handleDrop = (ev) => ev.preventDefault()\n\n  const handleDragEnd = (ev) => {\n    ev.target.style.opacity = \"1\"\n    state.slideDrag.dragging = false\n    if (state.previewDrag.drop) {\n      let start = state.previewDrag.drag.order\n      let end = state.previewDrag.drop.order\n\n      let dragged = state.previewDrag.drag\n      let dropped = state.previewDrag.drop\n\n      state.previewDrag.drag = mdl.SlideModel\n      state.previewDrag.drop = mdl.SlideModel\n\n      if (!eqProps(\"id\", dragged, dropped)) {\n        dragged.order = end\n        dropped.order = start\n\n        updateAndSaveSlideTask([dragged, dropped])\n      }\n    }\n  }\n\n  return {\n    oncreate: ({ dom }) => animateFadeIn({ dom }),\n    view: ({ attrs: { mdl, s, state } }) =>\n      m(\n        \".card.preview\",\n        {\n          draggable: mdl.isLoggedIn,\n          ondragstart: handleDragStart,\n          ondragend: handleDragEnd,\n          ondragover: handleDragOver,\n          ondrop: handleDrop,\n          ondragleave: handleDragLeave,\n          style: {\n            position: \"relative\",\n            opacity:\n              state.previewDrag.drop && state.previewDrag.drop.id == s.id\n                ? 0.4\n                : 1,\n          },\n        },\n        [\n          m(\".card-header\", [\n            m(\"p.slidePosition\", s.order),\n            mdl.isLoggedIn &&\n              m(RemoveLine, {\n                class: \"clarity\",\n                style: {\n                  position: \"absolute\",\n                  top: 0,\n                  right: 0,\n                },\n                onclick: () => removeSlideTask(s),\n              }),\n          ]),\n          m(\"p.slidePosition\", s.title),\n          // m(\".card-body\", m.trust(mdl.markup.render(s.content || \"\"))),\n          mdl.isLoggedIn &&\n            m(\".card-footer\", [\n              m(SlidePosition, {\n                slides: state.right(),\n                dir: \"left\",\n                slide: s,\n                update: updateAndSaveSlideTask,\n              }),\n              m(EditLine, {\n                class: \"clarity\",\n                style: {\n                  position: \"absolute\",\n                  top: 35,\n                  right: 0,\n                },\n                onclick: () => {\n                  m.route.set(\n                    `/edit/${mdl.CurrentPresentation.id}/slide/${s.id}`\n                  )\n                },\n              }),\n              m(SlidePosition, {\n                slides: state.right(),\n                dir: \"right\",\n                slide: s,\n                update: updateAndSaveSlideTask,\n              }),\n            ]),\n        ]\n      ),\n  }\n}\n\nexport default Preview\n","import Task from \"data.task\"\nimport { log } from \"utils\"\nimport { take } from \"ramda\"\nimport {\n  updateSlideDragStart,\n  updateSlideDragEnd,\n  updateStateDragEnd,\n  updateSlideTask,\n  deleteSlideTask,\n} from \"../model.js\"\nimport { EditLine, RemoveLine } from \"@mithril-icons/clarity/cjs\"\n\nconst Slide = ({ attrs: { getSlides, mdl, s, key, state } }) => {\n  const onError = (task) => (error) => log(`error with ${task}`)(error)\n  const onSuccess = (_) => getSlides({ attrs: { mdl } })\n\n  const authDeleteTask = (id) =>\n    window.confirm(\"Are you sure you want to delete?\")\n      ? Task.of(id)\n      : Task.rejected(id)\n\n  const removeSlideTask = (id) =>\n    authDeleteTask(id)\n      .chain(deleteSlideTask(state.presentationId))\n      .fork(onError(\"deleting\"), onSuccess)\n\n  const addSlideToShow = (s) => {\n    updateSlideTask(state.presentationId)([s]).fork(\n      onError(\"updating\"),\n      (_) => {\n        state.slideDrag = {\n          dragId: \"\",\n          dragging: false,\n          droppable: false,\n        }\n        onSuccess()\n      }\n    )\n  }\n\n  const handleDragStart = (ev) => {\n    ev.target.style.opacity = \"0.4\"\n    ev.dataTransfer.effectAllowed = \"move\"\n    ev.dataTransfer.setData(\"text/plain\", \"slide\")\n    state.slideDrag = updateSlideDragStart(s)(state.slideDrag)\n  }\n\n  const handleDragEnd = (ev) => {\n    ev.target.style.opacity = \"1\"\n    if (state.slideDrag.droppable) {\n      let _slide = updateSlideDragEnd(state.right().length)(s)\n\n      updateStateDragEnd(state.slideDrag)\n      return addSlideToShow(_slide)\n    }\n  }\n\n  return {\n    view: ({ attrs: { s, state, mdl } }) =>\n      m(\n        \".card\",\n        {\n          id: s.id,\n          draggable: mdl.isLoggedIn,\n          ondragstart: handleDragStart,\n          ondragend: handleDragEnd,\n        },\n        [\n          m(\"div.card-header\", [m(\"h1.title\", m(\"span\", take(15, s.title)))]),\n          mdl.isLoggedIn &&\n            m(\n              \".card-footer\",\n              m(RemoveLine, {\n                class: \"clarity\",\n                onclick: () => removeSlideTask(s.id),\n              }),\n              m(EditLine, {\n                class: \"clarity\",\n                onclick: () =>\n                  m.route.set(`/edit/${state.presentationId}/slide/${s.id}`),\n              })\n            ),\n        ]\n      ),\n  }\n}\n\nexport default Slide\n","import {\n  clone,\n  filter,\n  propEq,\n  prop,\n  without,\n  concat,\n  head,\n  sortBy,\n} from \"ramda\"\nimport SlidesModal from \"./slidesModal.js\"\nimport Slide from \"./Slide/component.js\"\nimport Preview from \"./Preview/component.js\"\nimport { loadSlides } from \"./model.js\"\nimport { log } from \"utils\"\n\nconst Slides = ({ attrs: { mdl } }) => {\n  const state = {\n    left: Stream([]),\n    right: Stream([]),\n    slideDrag: {\n      dragId: \"\",\n      dragging: false,\n      droppable: false,\n    },\n    previewDrag: {\n      drag: null,\n      drop: null,\n    },\n    presentationId: \"\",\n  }\n\n  const onError = log(\"error\")\n\n  const onSuccess = () => {\n    let slides = mdl.CurrentPresentation.Slides\n\n    state.left(filter(propEq(\"order\", 0), slides))\n\n    state.right(sortBy(prop(\"order\"), without(state.left(), slides)))\n\n    mdl.CurrentPresentation.slideShow = state.right()\n  }\n\n  const getSlides = ({ attrs: { mdl } }) => {\n    state.presentationId = m.route.param(\"id\")\n    return loadSlides(state.presentationId)(mdl).fork(onError, onSuccess)\n  }\n\n  const handleDragEnter = (ev) => {\n    ev.preventDefault()\n    state.bColor = true\n  }\n\n  const handleDragLeave = (ev) => {\n    ev.preventDefault()\n    state.slideDrag.dragging = false\n    state.slideDrag.droppable = false\n    state.bColor = false\n  }\n\n  const handleDrop = (ev) => {\n    ev.preventDefault()\n    let type = ev.dataTransfer.getData(\"text/plain\")\n    if (state.slideDrag.dragging) {\n      if (type == \"slide\") {\n        let item = head(\n          filter(propEq(\"id\", state.slideDrag.dragId), state.left())\n        )\n        state.slideDrag.droppable = true\n        item.order = state.right().length + 1\n        state.left(without([item], state.left()))\n        state.right(concat(state.right(), [item]))\n      } else {\n        let item = head(\n          filter(propEq(\"id\", state.slideDrag.dragId), state.right())\n        )\n      }\n    }\n  }\n\n  const handleDragOver = (ev) => {\n    ev.preventDefault()\n    let type = ev.dataTransfer.getData(\"text/plain\")\n    state.slideDrag.dragging = true\n    ev.dataTransfer.dropEffect = \"move\"\n  }\n\n  return {\n    oninit: getSlides,\n    view: ({ attrs: { mdl } }) => [\n      mdl.toggleModal\n        ? m(SlidesModal, {\n            slide: clone(mdl.SlideModel),\n            getSlides,\n            mdl,\n            pId: state.presentationId,\n          })\n        : \"\",\n      m(\".container.slides\", [\n        m(\n          `aside.left-drag ${state.left().length == 0 ? \".isDragging\" : \"\"}`,\n          {\n            style: {\n              overflowY: \"auto\",\n            },\n            onBeforeRemove: (vnode, done) => {\n              vnode.dom.addEventListener(\"animationend\", done)\n              vnode.dom.style.animation = \"fadeOut 1s\"\n            },\n          },\n          state.left().map((s) =>\n            m(Slide, {\n              key: s.id,\n              mdl,\n              getSlides,\n              s,\n              state,\n            })\n          )\n        ),\n\n        m(\n          `section.right-drag${state.slideDrag.dragging ? \".isDragging\" : \"\"}`,\n          {\n            style: {\n              height: \"90vh\",\n              overflowY: \"auto\",\n            },\n            onBeforeRemove: (vnode, done) => {\n              vnode.dom.addEventListener(\"animationend\", done)\n              vnode.dom.style.animation = \"fadeOut 1s\"\n            },\n            ondragleave: handleDragLeave,\n            ondrop: handleDrop,\n            ondragover: handleDragOver,\n            ondragenter: handleDragEnter,\n          },\n          state.right().map((s) => {\n            return m(Preview, {\n              key: s.id,\n              mdl,\n              getSlides,\n              s,\n              state,\n            })\n          })\n        ),\n      ]),\n    ],\n  }\n}\n\nexport default Slides\n","import { getQlTask } from \"utils\"\nimport { compose, lt, prop, gt, set, lensProp, subtract, path } from \"ramda\"\n\nconst toViewModel = (model) => (presentations) =>\n  (model.CurrentPresentation = presentations)\n\nexport const toStruct = (acc, item) => {\n  if (item.order > 0 && !acc.keys.has(item.id)) {\n    item.order = acc.keys.size + 1\n    acc.keys.add(item.id)\n    acc.values[item.order] = item\n    acc.items(Object.keys(acc.values))\n    return acc\n  }\n  return acc\n}\n\nconst orderOf = (slide) => prop(\"order\", slide)\n\nexport const forGreater = (removeSlide) => (checkSlide) =>\n  lt(orderOf(removeSlide), orderOf(checkSlide))\n\nexport const forLess = (removeSlide) => (checkSlide) =>\n  gt(orderOf(removeSlide), orderOf(checkSlide))\n\nexport const reduceOrder = (slide) =>\n  set(lensProp(\"order\", slide), subtract(orderOf(slide), 1), slide)\n\nexport const getId = (item) => prop(\"id\", item)\n\nconst resetOrder = (slide) => set(lensProp(\"order\", slide), 0, slide)\n\nexport const updateRemoveSlide = compose(Array.of, resetOrder)\n\nconst updateId = (slide) => (slideDrag) =>\n  set(lensProp(\"dragId\", slideDrag), prop(\"id\", slide), slideDrag)\n\nexport const updateSlideDragStart = (slide) =>\n  compose(updateId(slide), updateDrag)\n\nconst updateOrder = (length) => (slide) => set(lensProp(\"order\"), length, slide)\n\nexport const updateSlideDragEnd = (length) => compose(updateOrder(length))\n\nconst updateDrag = (state) => set(lensProp(\"dragging\", false, state))\n\nconst updateDrop = (state) => set(lensProp(\"droppable\", false, state))\n\nexport const updateStateDragEnd = compose(updateDrop, updateDrag)\n\nexport const loadSlides = (id) => (model) =>\n  getQlTask(\n    `{ presentation(where:{id:${JSON.stringify(id)}}){\n      id, title, Slides { id title content order }\n    } }`\n  )\n    .map(path([\"data\", \"presentation\"]))\n    .map(toViewModel(model))\n\nexport const saveSlideTask = ({ title, order, presentation_id }) => {\n  let q = `mutation {\n            updatePresentation(\n              where: {\n                id: ${JSON.stringify(presentation_id)}\n              }\n              data: {\n                  Slides:{\n                    create : {\n                      title: ${JSON.stringify(title)}\n                      content: \"\"\n                      order: ${JSON.stringify(order)}\n                    }\n                  }\n          }){\n    id title Slides { id title content order }\n  } }`\n\n  return getQlTask(q).map(path([\"data\", \"updatePresentation\", \"Slides\"]))\n}\n\nexport const deleteSlideTask = (presentation_id) => (id) => {\n  let q = `mutation {\n            updatePresentation(\n              where: {\n                id: ${JSON.stringify(presentation_id)}\n              }\n              data: {\n                  Slides:{\n                    delete : [{\n                      id: ${JSON.stringify(id)}\n                    }]\n                  }\n          }){\n    id title Slides { id title content order}\n  } }`\n\n  return getQlTask(q).map(path([\"data\", \"updatePresentation\", \"Slides\"]))\n}\n\nexport const updateSlideTask = (presentation_id) => (slides) => {\n  let qlSlides = slides.map(\n    (slide) =>\n      `{\n      where: {\n        id: ${JSON.stringify(slide.id)}\n      }\n      data: {\n        order: ${JSON.stringify(slide.order)}\n      }\n    }`\n  )\n\n  let q = `mutation {\n            updatePresentation(\n              where: {\n                id: ${JSON.stringify(presentation_id)}\n              }\n              data: {\n                Slides:{\n                  update : [${qlSlides}]\n                }\n              }\n            )\n          { id title Slides { id title content order } }\n        }`\n\n  return getQlTask(q).map(path([\"data\", \"updatePresentation\", \"Slides\"]))\n}\n","import { assoc } from \"ramda\"\nimport { saveSlideTask } from \"./model.js\"\nimport { Modal } from \"components/modal\"\n\nconst SlidesModal = ({ attrs: { pId, slide, getSlides, mdl } }) => {\n  const state = {\n    errors: \"\",\n    title: \"\",\n  }\n\n  const onError = (errors) => {\n    log(\"error\")(errors)\n    state.errors = errors\n  }\n\n  const onSuccess = () => {\n    getSlides({ attrs: { mdl } })\n    mdl.toggleModal(mdl, \"slides\")\n  }\n\n  const save = (e) => {\n    e.preventDefault()\n    let dto = assoc(\"presentation_id\", pId, assoc(\"title\", state.title, slide))\n    saveSlideTask(dto).fork(onError, onSuccess)\n  }\n\n  return {\n    view: () =>\n      m(Modal, {\n        onremove: () => {\n          state.title = \"\"\n          state.errors = \"\"\n        },\n        mdl: mdl,\n        id: \"slides\",\n        modalTitle: \"New Slide\",\n        modalContent: m(\"input\", {\n          value: state.title,\n          autofocus: true,\n          type: \"text\",\n          onkeyup: (e) => (state.title = e.target.value),\n        }),\n        modalFooter: m(\"button.card-btn\", { onclick: save }, \"add slide\"),\n      }),\n  }\n}\n\nexport default SlidesModal\n","import m from \"mithril\"\nimport { pluck } from \"ramda\"\nimport { animateEntranceRight } from \"utils\"\n\nconst Ending = {\n  view: () =>\n    m(\n      \".endingContainer\",\n      m(\"h1.endingTitle\", \"THE END!\"),\n      m(\"img.endingImg\", {\n        id: \"ending\",\n        src: \"https://imgur.com/uj15GJp.gif\",\n        width: \"100%\",\n      })\n    ),\n}\n\nconst updateCursor = (state, pageX) => {\n  state.class =\n    (pageX / window.innerWidth) * 100 > 50 ? \"point-right\" : \"point-left\"\n}\n\nconst SlideShow = ({ attrs: { mdl } }) => {\n  if (!mdl.CurrentPresentation.id) m.route.set(\"/presentations\")\n  const state = {\n    update: false,\n    key: undefined,\n    current: 0,\n    class: \"\",\n\n    size: mdl.CurrentPresentation.slideShow.length || 0,\n    contents: pluck(\"content\", mdl.CurrentPresentation.slideShow) || 0,\n  }\n\n  const calcStatePosition = (x) =>\n    x > window.innerWidth / 2 ? \"right\" : \"left\"\n\n  const updateStatePosition = (x, state) =>\n    (state.key = calcStatePosition(x) == \"right\" ? \"ArrowRight\" : \"ArrowLeft\")\n\n  const nextSlide = (target) => {\n    if (state.current == state.size - 1) {\n      state.contents[state.current] = \"\"\n    } else {\n      state.current++\n    }\n    target.scroll(0, -300)\n    return state\n  }\n\n  const prevSlide = (target) => {\n    target.scrollIntoView(true)\n    state.current == 0 ? state.current : state.current--\n  }\n\n  const changeSlide = (key, target) => {\n    switch (key) {\n      case \"ArrowLeft\":\n        if (target.children) prevSlide(target)\n        break\n      case \"ArrowRight\":\n        if (target.children) nextSlide(target)\n        break\n      case \"ArrowUp\":\n        target.scrollBy(0, 100)\n        break\n      case \"ArrowDown\":\n        target.scrollBy(0, -100)\n        break\n    }\n  }\n\n  return {\n    dir: state.key,\n    oninit: (state.slide = state.contents[state.current]),\n    view: ({ attrs: { mdl } }) =>\n      m(\n        \".slideshow#slideshow\",\n        {\n          class: state.class,\n          tabindex: 0,\n          onkeyup: ({ key, target }) => {\n            state.update = true\n            state.key = key\n            changeSlide(key, target)\n          },\n          onmousemove: ({ pageX }) => {\n            state.update = false\n            updateCursor(state, pageX)\n          },\n          onclick: ({ x, target }) => {\n            state.update = true\n            updateStatePosition(x, state)\n            return changeSlide(state.key, target)\n          },\n        },\n        m(\n          \".slidecard#slidecard\",\n          {\n            onbeforeupdate: () =>\n              ![\"ArrowUp\", \"ArrowDown\"].includes(state.key) && state.update,\n            onupdate: ({ dom }) => {\n              dom.scrollIntoView({\n                block: \"start\",\n                inline: \"start\",\n              })\n              animateEntranceRight({ dom })\n            },\n          },\n          state.contents[state.current]\n            ? m.trust(mdl.markup.render(state.contents[state.current]))\n            : m(Ending)\n        )\n      ),\n  }\n}\n\nexport default SlideShow\n","import sha256 from \"crypto-js/sha256\"\n\nexport const onlineUrl =\n  \"https://eu1.prisma.sh/boaz-blake-8951e1/mithril-presenter/dev\"\n\nexport const secure = (code) => sha256(code).toString()\n","import Task from \"data.task\"\nimport { onlineUrl, makeQuery } from \"./index.js\"\n\nexport const postQl = (query) =>\n  new Task((rej, res) =>\n    m\n      .request({\n        method: \"POST\",\n        url: `${onlineUrl}`,\n        withCredentials: false,\n        body: makeQuery(query),\n      })\n      .then(res, rej)\n  )\n\nconst postTask = (url) => (dto) =>\n  new Task((rej, res) =>\n    m\n      .request({\n        method: \"POST\",\n        url: `${url}`,\n        body: dto,\n        withCredentials: false,\n      })\n      .then(res, rej)\n  )\n\nconst putTask = (url) => ({ dto }) =>\n  new Task((rej, res) =>\n    m\n      .request({\n        method: \"PUT\",\n        url: `${onlineUrl}/${url}`,\n        body: dto,\n        withCredentials: false,\n      })\n      .then(res, rej)\n  )\n\nconst getTask = (url) =>\n  new Task((rej, res) =>\n    m\n      .request({\n        method: \"GET\",\n        url: `${onlineUrl}/${url}`,\n        withCredentials: false,\n      })\n      .then(res, rej)\n  )\n\nconst deleteTask = (url) => (id) =>\n  new Task((rej, res) =>\n    m\n      .request({\n        method: \"DELETE\",\n        url: `${onlineUrl}/${url}/${id}`,\n        withCredentials: false,\n      })\n      .then(res, rej)\n  )\n\nexport default { postTask, putTask, getTask, deleteTask, postQl }\n","import anime from \"animejs\"\n\nexport const animateSlideEntrance = ({ dom }) => {\n  return dom.animate(\n    [\n      { transform: \"translate3d(20%,0,0)\", opacity: 0 },\n      { transform: \"none\", opacity: 1 }\n    ],\n    {\n      duration: 650\n    }\n  )\n}\n\nexport const animateEntranceRight = ({ dom }) => {\n  return dom.animate(\n    [\n      {\n        animation: \"\",\n        transform: \"translate3d(100%,0,0)\",\n        scale: 2,\n        opacity: 0\n      },\n      {\n        animation: \"stretchRight 1s ease-in-out both\",\n        transform: \"none\",\n        opacity: 1,\n        scale: 1\n      }\n    ],\n    {\n      duration: 350\n    }\n  )\n}\n\nexport const animateChildEntrance = ({ dom }) => {\n  let children = [...dom.children]\n\n  return children.map((child, index) => {\n    setTimeout(() => {\n      child.animate(\n        [\n          { transform: \"translate3d(0,-100%,0)\", opacity: 0 },\n          { transform: \"none\", opacity: 1 }\n        ],\n        {\n          duration: 850\n        }\n      )\n    }, (index + 1) * 200)\n  })\n}\n\nexport const animateExit = (dom) => {\n  let children = [...dom.children]\n\n  let anim = animate([\n    { transform: \"none\", opacity: 1 },\n    { transform: \"translate3d(25%,100%,0)\", opacity: 0 }\n  ])\n\n  let waapi = children.map((child) =>\n    child.animate(anim, {\n      duration: 850\n    })\n  )\n\n  return new Promise((resolve) => {\n    waapi.onfinish = function(e) {\n      resolve()\n    }\n  })\n}\n\nexport const animateFadeIn = ({ dom }) => {\n  let children = [...dom.children]\n  children.map((child, index) => {\n    child.style.opacity = 0\n    child.style.transition = \"opacity .4s ease-in-out\"\n\n    return setTimeout(() => {\n      child.style.opacity = 1\n    }, (index + 1) * 200)\n  })\n}\n\nexport const animateFadeOut = ({ dom }) => {\n  let anim = [\n    { transition: \"opacity .4s ease-in-out\" },\n    { transform: \"none\", opacity: 1 },\n    { transform: \"translate3d(25%,100%,0)\", opacity: 0 }\n  ]\n  let waapi = dom.animate(anim, {\n    duration: 850\n  })\n\n  return new Promise((resolve) => {\n    waapi.onfinish = function(e) {\n      resolve()\n    }\n  })\n}\n\nexport const animeEntrance = ({ dom }) => {\n  let children = [...dom.children]\n  const res = children.map((el) =>\n    anime({\n      target: el,\n      easing: \"easeInQuad\",\n      translateX: 250,\n      offset: 0\n    })\n  )\n\n  return res\n}\n\nexport const bounceEntrance = ({ dom }) => {\n  return dom.animate({\n    animation: \"animation 1000ms linear both\",\n    keyframes: {\n      \"0%\": {\n        transform: \"matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)\"\n      },\n      \"3.4%\": {\n        transform:\n          \"matrix3d(1.316, 0, 0, 0, 0, 1.407, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)\"\n      },\n      \"4.7%\": {\n        transform:\n          \"matrix3d(1.45, 0, 0, 0, 0, 1.599, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)\"\n      },\n      \"6.81%\": {\n        transform:\n          \"matrix3d(1.659, 0, 0, 0, 0, 1.893, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)\"\n      },\n      \"9.41%\": {\n        transform:\n          \"matrix3d(1.883, 0, 0, 0, 0, 2.168, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)\"\n      },\n      \"10.21%\": {\n        transform:\n          \"matrix3d(1.942, 0, 0, 0, 0, 2.226, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)\"\n      },\n      \"13.61%\": {\n        transform:\n          \"matrix3d(2.123, 0, 0, 0, 0, 2.332, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)\"\n      },\n      \"14.11%\": {\n        transform:\n          \"matrix3d(2.141, 0, 0, 0, 0, 2.331, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)\"\n      },\n      \"17.52%\": {\n        transform:\n          \"matrix3d(2.208, 0, 0, 0, 0, 2.239, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)\"\n      },\n      \"18.72%\": {\n        transform:\n          \"matrix3d(2.212, 0, 0, 0, 0, 2.187, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)\"\n      },\n      \"21.32%\": {\n        transform:\n          \"matrix3d(2.196, 0, 0, 0, 0, 2.069, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)\"\n      },\n      \"24.32%\": {\n        transform:\n          \"matrix3d(2.151, 0, 0, 0, 0, 1.96, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)\"\n      },\n      \"25.23%\": {\n        transform:\n          \"matrix3d(2.134, 0, 0, 0, 0, 1.938, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)\"\n      },\n      \"29.03%\": {\n        transform:\n          \"matrix3d(2.063, 0, 0, 0, 0, 1.897, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)\"\n      },\n      \"29.93%\": {\n        transform:\n          \"matrix3d(2.048, 0, 0, 0, 0, 1.899, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)\"\n      },\n      \"35.54%\": {\n        transform:\n          \"matrix3d(1.979, 0, 0, 0, 0, 1.962, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)\"\n      },\n      \"36.74%\": {\n        transform:\n          \"matrix3d(1.972, 0, 0, 0, 0, 1.979, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)\"\n      },\n      \"41.04%\": {\n        transform:\n          \"matrix3d(1.961, 0, 0, 0, 0, 2.022, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)\"\n      },\n      \"44.44%\": {\n        transform:\n          \"matrix3d(1.966, 0, 0, 0, 0, 2.032, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)\"\n      },\n      \"52.15%\": {\n        transform:\n          \"matrix3d(1.991, 0, 0, 0, 0, 2.006, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)\"\n      },\n      \"59.86%\": {\n        transform:\n          \"matrix3d(2.006, 0, 0, 0, 0, 1.99, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)\"\n      },\n      \"63.26%\": {\n        transform:\n          \"matrix3d(2.007, 0, 0, 0, 0, 1.992, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)\"\n      },\n      \"75.28%\": {\n        transform:\n          \"matrix3d(2.001, 0, 0, 0, 0, 2.003, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)\"\n      },\n      \"85.49%\": {\n        transform:\n          \"matrix3d(1.999, 0, 0, 0, 0, 2, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)\"\n      },\n      \"90.69%\": {\n        transform:\n          \"matrix3d(1.999, 0, 0, 0, 0, 1.999, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)\"\n      },\n      \"100%\": {\n        transform: \"matrix3d(2, 0, 0, 0, 0, 2, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)\"\n      }\n    }\n  })\n}\n","export * from \"./animations.js\"\nexport * from \"./requests.js\"\nexport * from \"./.secret.js\"\nexport * from \"./Tasks.js\"\n\nconst makeQuery = (string) => JSON.parse(JSON.stringify(string))\n\nconst repeat = (n) => (f) => (x) => {\n  let m = n\n  while (true) {\n    if (m === 0) return x\n    else (m = m - 1), (x = f(x))\n  }\n}\n\nconst wait = (n) => (f) => (x) => {\n  let m = n\n  while (true) {\n    if (m === 0) return x\n    else (m = m - 1), (x = f(x))\n  }\n}\n\nconst log = (m) => (v) => {\n  console.log(m, v)\n  return v\n}\n\nconst viewModelMap = (signature) => {\n  var _map = {}\n  return function (key) {\n    if (!_map[key]) {\n      _map[key] = {}\n      for (var prop in signature) _map[key][prop] = Stream(signature[prop]())\n    }\n    return _map[key]\n  }\n}\nexport { viewModelMap, log, repeat, wait, makeQuery }\n","import httpTasks from \"./Tasks.js\"\n\nexport const findPresentationsTask = () => httpTasks.getTask(\"presentations\")\n\nexport const getQlTask = (query) => httpTasks.postQl({ query })\n\nexport const savePresentationTask = (dto) =>\n  httpTasks.postTask(`presentations`)({\n    dto,\n  })\n\nexport const deletePresentationsTask = (id) =>\n  httpTasks.deleteTask(\"presentations\")(id)\n\nexport const findSlidesTask = (id) =>\n  httpTasks.getTask(`presentations/${id}/slides`)\n\nexport const saveSlideTask = (dto) => httpTasks.postTask(`slides`)({ dto })\n\nexport const updateSlideTask = (id) => (dto) =>\n  httpTasks.putTask(`slides/${id}`)({ dto })\n\nexport const deleteSlideTask = (id) => httpTasks.deleteTask(\"slides\")(id)\n\nexport const loadSlideTask = (id) => httpTasks.getTask(`slides/${id}`)\n"]}