{"version":3,"sources":["app/components/layout.js","app/components/loader.js","app/components/modal.js","app/components/toolbar.js","app/editor/component.js","app/editor/model.js","app/index.js","app/initialize.js","app/models.js","app/presentations/Presentation/component.js","app/presentations/component.js","app/presentations/model.js","app/presentations/presentationModal.js","app/slides/Preview/component.js","app/slides/Slide/component.js","app/slides/component.js","app/slides/model.js","app/slides/slidesModal.js","app/slideshow/component.js","app/utils/.secret.js","app/utils/Tasks.js","app/utils/animations.js","app/utils/index.js","app/utils/requests.js"],"names":["Layout","view","children","mdl","attrs","m","Toolbar","Loader","isActive","id","modals","Modal","modalTitle","modalContent","modalFooter","onremove","onclick","toggleModal","AuthModal","state","code","verifyCode","e","isLoggedIn","sessionStorage","setItem","oninit","Email","send","then","value","autofocus","type","onkeyup","target","login","removeItem","toggleModalSwitch","route","get","split","context","length","toPresentations","Link","selector","class","href","toSlides","CurrentPresentation","toSlideShow","slideShow","printToPDF","caputerScreen","navView","page","actionView","auth","Button","action","label","Editor","presentationId","slide","title","content","_","set","onError","error","log","onSuccess","getSlide","param","fork","updateInput","input","save","preventDefault","oncreate","placeholder","oninput","trust","markup","render","loadSlide","q","JSON","stringify","map","editSlide","root","document","body","getItem","Models","makeRoutes","Presentations","Slides","onmatch","SlideShow","addEventListener","require","hljs","registerLanguage","javascript","MarkdownIt","html","xhtmlOut","breaks","langPrefix","linkify","typographer","quotes","highlight","str","lang","use","highlightjs","emoji","sub","sup","ins","footnote","deflist","abbr","arrows","SlideModel","contents","order","presentation_id","SlideShowStruct","keys","Set","values","items","Stream","getProfile","w","window","open","c","cloneNode","appendChild","getElementById","print","close","profile","innerWidth","presentations","slides","modal","Presentation","task","models","deleted","authDeleteTask","confirm","Task","of","rejected","removePresTask","pId","chain","deletePresentationsTask","style","margin","height","RemoveLine","width","stopPropagation","errors","dto","findPresentations","PresentationModal","presentationModel","PresentationModel","dom","onBeforeRemove","vnode","done","animation","key","toViewModel","data","getPresentations","savePresentationTask","p","push","SlidePosition","update","updateSlidesPosition","dir","prevSlide","filter","x","nextSlide","disabled","Preview","getSlides","s","updateAndSaveSlideTask","removeSlideTask","tail","reduceOrder","right","removeSlide","updateList","handleDragStart","ev","opacity","dataTransfer","effectAllowed","setData","previewDrag","drag","handleDragOver","drop","handleDragLeave","handleDrop","handleDragEnd","slideDrag","dragging","start","end","dragged","dropped","draggable","ondragstart","ondragend","ondragover","ondrop","ondragleave","position","top","EditLine","Slide","addSlideToShow","dragId","droppable","_slide","left","presentation","handleDragEnter","bColor","getData","item","dropEffect","SlidesModal","overflowY","ondragenter","model","toStruct","acc","has","size","add","Object","orderOf","forGreater","checkSlide","forLess","getId","resetOrder","updateRemoveSlide","Array","updateId","updateSlideDragStart","updateDrag","updateOrder","updateSlideDragEnd","updateDrop","updateStateDragEnd","loadSlides","saveSlideTask","deleteSlideTask","updateSlideTask","qlSlides","ENDING","undefined","cursor","calcStatePosition","updateStatePosition","scrollTo","behaviour","changeSlide","scrollBy","tabindex","onmouseenter","onmouseleave","onbeforeupdate","includes","onupdate","onlineUrl","authSettings","domain","clientID","redirect_uri","location","origin","responseType","getRandomInt","n","Math","floor","random","join","emailMe","SecureToken","To","From","Subject","Body","postQl","query","rej","res","request","method","url","withCredentials","postTask","putTask","getTask","deleteTask","animateSlideEntrance","animate","transform","duration","animateEntranceRight","scale","animateChildEntrance","child","index","setTimeout","animateExit","anim","waapi","Promise","resolve","onfinish","animateFadeIn","transition","animateFadeOut","animeEntrance","el","easing","translateX","offset","bounceEntrance","keyframes","makeQuery","string","parse","repeat","f","wait","v","console","viewModelMap","signature","_map","prop","findPresentationsTask","httpTasks","getQlTask","findSlidesTask","loadSlideTask"],"mappings":"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","file":"docs/app.js","sourcesContent":["import Toolbar from \"./toolbar.js\"\n\nexport const Layout = {\n  view: ({ children, attrs: { mdl } }) =>\n    m(\".container\", m(Toolbar, { mdl }), children),\n}\n","export const Loader = () =>\n  m(\".lds-roller\", [\n    m(\".\"),\n    m(\".\"),\n    m(\".\"),\n    m(\".\"),\n    m(\".\"),\n    m(\".\"),\n    m(\".\"),\n    m(\".\")\n  ])\n","const isActive = (mdl, id) => (mdl.modals[id] ? \"active\" : \"\")\n\nexport const Modal = ({ attrs: { mdl } }) => {\n  return {\n    view: ({\n      attrs: { id, modalTitle, modalContent, modalFooter, onremove },\n    }) =>\n      mdl.modals[id] &&\n      m(\n        `.modal.${isActive(mdl, id)}[id=${id}]`,\n        {\n          onremove,\n        },\n        m(\"a.modal-overlay[href='#'][aria-label='Close']\", {\n          onclick: () => mdl.toggleModal(mdl, id),\n        }),\n        m(\".modal-container\", [\n          m(\".modal-header\", [\n            m(\"button.btn.btn-clear.float-right[aria-label='Close']\", {\n              onclick: () => mdl.toggleModal(mdl, id),\n            }),\n            m(\".modal-title.h5\", modalTitle),\n          ]),\n          m(\".modal-body\", m(\".content\", modalContent)),\n          m(\".modal-footer\", modalFooter),\n        ])\n      ),\n  }\n}\n","import { isEmpty, split, view, lensProp } from \"ramda\"\nimport { emailMe } from \"../utils/.secret.js\"\nimport { log } from \"utils\"\nimport { Modal } from \"./modal.js\"\n\nconst AuthModal = ({ attrs: { mdl } }) => {\n  const state = { code: \"\" }\n\n  const verifyCode = (state) => (e) => {\n    if (state.code === mdl.code) {\n      mdl.isLoggedIn = true\n      mdl.toggleModal(mdl, \"auth\")\n      sessionStorage.setItem(\"code\", true)\n    }\n  }\n\n  return {\n    oninit: () => {\n      Email.send(emailMe(mdl.code)).then(log(\"email sent: \")) //add errror handler\n    },\n    view: () =>\n      m(Modal, {\n        mdl,\n        id: \"auth\",\n        modalTitle: \"Verify Code\",\n        modalContent: m(\"input.modal-input\", {\n          value: state.code,\n          autofocus: true,\n          type: \"text\",\n          onkeyup: (e) => (state.code = e.target.value),\n        }),\n        modalFooter: m(\n          \"button.card-btn\",\n          { onclick: verifyCode(state) },\n          \"Login\"\n        ),\n      }),\n  }\n}\n\nconst login = (mdl) =>\n  mdl.isLoggedIn\n    ? m(\n        \"a.btn.btn-link\",\n        {\n          onclick: () => {\n            mdl.isLoggedIn = false\n            sessionStorage.removeItem(\"code\")\n          },\n        },\n        \"Logout\"\n      )\n    : m(\n        \"a.btn.btn-link\",\n        {\n          onclick: () => {\n            mdl.toggleModal(mdl, \"auth\")\n          },\n        },\n        \"Login\"\n      )\n\nconst toggleModalSwitch = (mdl) =>\n  mdl.isLoggedIn &&\n  m(\n    \"a.btn.btn-link\",\n    {\n      onclick: () => {\n        let route = m.route.get().split(\"/\")\n        let context = route[route.length - 1]\n        mdl.toggleModal(mdl, context)\n      },\n    },\n    \"Add New\"\n  )\n\nconst toPresentations = [\n  m(\n    m.route.Link,\n    { selector: \"a\", class: \"btn btn-link\", href: \"/presentations\" },\n    \"Presentations\"\n  ),\n]\n\nconst toSlides = (mdl) => [\n  m(\n    m.route.Link,\n    {\n      selector: \"a\",\n      class: \"btn btn-link\",\n      href: `/presentation/${mdl.CurrentPresentation.id}/slides`,\n    },\n    \"slides\"\n  ),\n]\n\nconst toSlideShow = (mdl) =>\n  mdl.CurrentPresentation &&\n  !isEmpty(mdl.CurrentPresentation.slideShow()) &&\n  m(\n    m.route.Link,\n    {\n      selector: \"a\",\n      class: \"btn btn-link\",\n      href: `/slideshow/${mdl.CurrentPresentation.id}`,\n    },\n    \"Slide Show\"\n  )\n\nconst printToPDF = (mdl) =>\n  m(\n    m.route.Link,\n    {\n      selector: \"a\",\n      class: \"btn btn-link\",\n      onclick: (e) => mdl.caputerScreen(),\n    },\n    \"Print Slide\"\n  )\n\nconst navView = (mdl) => {\n  let page = view(lensProp(1), split(\"/\", m.route.get()))\n  switch (page) {\n    case \"presentation\":\n      return [toPresentations, toSlideShow(mdl)]\n      break\n\n    case \"slideshow\":\n      return [toPresentations, toSlides(mdl)]\n      break\n\n    case \"slides\":\n      return [toPresentations, toSlideShow(mdl)]\n      break\n\n    case \"edit\":\n      return [toPresentations, toSlides(mdl), toSlideShow(mdl)]\n      break\n    default:\n  }\n}\n\nconst actionView = (mdl) => {\n  let page = view(lensProp(1), split(\"/\", m.route.get()))\n  switch (page) {\n    case \"presentations\":\n      return [login(mdl), toggleModalSwitch(mdl)]\n      break\n    case \"presentation\":\n      return [login(mdl), toggleModalSwitch(mdl)]\n      break\n    case \"slideshow\":\n      return [login(mdl), printToPDF(mdl)]\n      break\n    default:\n  }\n}\n\nconst Toolbar = ({ attrs: { mdl } }) => {\n  return {\n    view: ({ attrs: { mdl } }) =>\n      m(\n        \".navbar\",\n        m(\".navbar-section\", navView(mdl)),\n        m(\".navbar-section\", actionView(mdl)),\n        mdl.modals.auth && m(AuthModal, { mdl })\n      ),\n  }\n}\n\nexport default Toolbar\n","import { loadSlide, editSlide } from \"./model.js\"\nimport Loader from \"components\"\n\nconst Button = {\n  view: ({ attrs: { action, label } }) =>\n    m(\n      \"button.card-btn\",\n      {\n        onclick: action\n      },\n      label\n    )\n}\n\nconst Editor = ({ attrs: { mdl } }) => {\n  let state = {\n    presentationId: \"\",\n    slide: { title: \"\", content: \"\", id: \"\" }\n  }\n\n  const toSlides = (_) =>\n    m.route.set(`/presentation/${state.presentationId}/slides`)\n\n  const onError = (error) => log(\"error\")(error)\n\n  const onSuccess = (slide) => {\n    state.slide = slide\n  }\n\n  const getSlide = () => {\n    state.slide.id = m.route.param(\"id\")\n    state.presentationId = m.route.param(\"pid\")\n    return loadSlide(state.slide.id).fork(onError, onSuccess)\n  }\n\n  const updateInput = (input) => (e) => (state.slide[input] = e.target.value)\n\n  const save = (e) => {\n    e.preventDefault()\n\n    editSlide(state.slide).fork(onError, () => toSlides())\n  }\n\n  return {\n    oncreate: getSlide(),\n    view: () => {\n      return m(\".container.editor\", [\n        m(\n          \".editor-left\",\n          m(\".card.follow\", [\n            m(\".card-header\", [\n              m(\".card-footer\", [\n                m(Button, { action: save, label: \"Save\" }),\n                m(Button, { action: toSlides, label: \"Cancel\" })\n              ]),\n              m(\"input.editor-input\", {\n                type: \"text\",\n                placeholder: \"Slide Title\",\n                oninput: updateInput(\"title\"),\n                value: state.slide.title\n              })\n            ]),\n            m(\"textarea.editor-text\", {\n              oninput: updateInput(\"content\"),\n              value: state.slide.content\n            }),\n          ])\n        ),\n        m(\n          \".editor-right\",\n          m.trust(mdl.markup.render(state.slide.content || \"\"))\n        )\n      ])\n    }\n  }\n}\n\nexport default Editor\n","import { getQlTask } from \"utils\"\nimport { path } from \"ramda\"\n\nexport const loadSlide = id => {\n  let q = `{ slide(where:{id:${JSON.stringify(id)}}){\n              id content title\n            }\n          }`\n  return getQlTask(q).map(path([\"data\", \"slide\"]))\n}\n\nexport const editSlide = ({ id, title, content }) => {\n  let q = `mutation {\n            updateSlide(\n              data: {\n                title: ${JSON.stringify(title)}\n                content: ${JSON.stringify(content)}\n              }\n              where: {\n                id: ${JSON.stringify(id)}\n              }) {\n                id\n                title\n              }\n        }`\n\n  return getQlTask(q).map(path([\"data\", \"updatePresentation\", \"Slides\"]))\n}\n","const root = document.body\nimport { Layout } from \"./components/layout.js\"\n\nimport Presentations from \"./presentations/component.js\"\nimport Slides from \"./slides/component.js\"\nimport Editor from \"./editor/component.js\"\nimport SlideShow from \"./slideshow/component.js\"\nimport Models from \"./models.js\"\n\nif (sessionStorage.getItem(\"code\")) {\n  Models.isLoggedIn = true\n}\n\nconst makeRoutes = (mdl) => {\n  return {\n    \"/presentations\": {\n      render: () => m(Layout, { mdl }, m(Presentations, { mdl })),\n    },\n    \"/presentation/:id/slides\": {\n      render: () => m(Layout, { mdl }, m(Slides, { mdl })),\n    },\n    \"/edit/:pid/slide/:id\": {\n      onmatch: () => mdl.isLoggedIn || m.route.set(m.route.get()),\n      render: () => m(Layout, { mdl }, m(Editor, { mdl })),\n    },\n    \"/slideshow/:id\": {\n      onmatch: ({ id }) =>\n        mdl.CurrentPresentation.Slides.length == 0 &&\n        m.route.set(`/presentation/${id}/slides`),\n      render: () => m(Layout, { mdl }, m(SlideShow, { mdl })),\n    },\n  }\n}\n\nm.route(root, \"/presentations\", makeRoutes(Models))\n","document.addEventListener(\"DOMContentLoaded\", () => require(\"./index.js\"))\n","import MarkdownIt from \"markdown-it\"\nimport highlightjs from \"markdown-it-highlightjs\"\nimport emoji from \"markdown-it-emoji\"\nimport sub from \"markdown-it-sub\"\nimport sup from \"markdown-it-sup\"\nimport ins from \"markdown-it-ins\"\nimport footnote from \"markdown-it-footnote\"\nimport deflist from \"markdown-it-deflist\"\nimport abbr from \"markdown-it-abbr\"\n// import imsize from \"markdown-it-imsize\"\nimport arrows from \"markdown-it-smartarrows\"\nimport hljs from \"highlight.js\"\nimport javascript from \"highlight.js/lib/languages/javascript\"\n// import printJS from \"print-js\"\nhljs.registerLanguage(\"javascript\", javascript)\nimport { code } from \"utils\"\n\nconst markup = new MarkdownIt({\n  html: true, // Enable HTML tags in source\n  xhtmlOut: true, // Use '/' to close single tags (<br />).\n  // This is only for full CommonMark compatibility.\n  breaks: true, // Convert '\\n' in paragraphs into <br>\n  langPrefix: \"\", // CSS language prefix for fenced blocks. Can be\n  // useful for external highlighters.\n  linkify: true, // Autoconvert URL-like text to links\n\n  // Enable some language-neutral replacement + quotes beautification\n  typographer: true,\n\n  // Double + single quotes replacement pairs, when typographer enabled,\n  // and smartquotes on. Could be either a String or an Array.\n  //\n  // For example, you can use '«»„“' for Russian, '„“‚‘' for German,\n  // and ['«\\xA0', '\\xA0»', '‹\\xA0', '\\xA0›'] for French (including nbsp).\n  quotes: \"“”‘’\",\n\n  // Highlighter function. Should return escaped HTML,\n  // or '' if the source string is not changed and should be escaped externally.\n  // If result starts with <pre... internal wrapper is skipped.\n  highlight: (str, lang) => str,\n})\n  .use(highlightjs, { hljs })\n  .use(emoji)\n  .use(sub)\n  .use(sup)\n  .use(ins)\n  .use(footnote)\n  .use(deflist)\n  .use(abbr)\n  // .use(imsize, { autofill: true })\n  .use(arrows)\n\nconst SlideModel = {\n  title: \"\",\n  contents: \"\",\n  order: 0,\n  presentation_id: \"\",\n}\n\nconst Slides = []\n\nconst Presentations = []\n\nconst SlideShowStruct = {\n  keys: new Set(),\n  values: {},\n  items: Stream([]),\n}\n\nconst CurrentPresentation = {\n  title: \"\",\n  id: \"\",\n  slideShow: Stream([]),\n  Slides,\n}\n\nconst getProfile = (w) => {\n  if (w < 668) return \"phone\"\n  if (w < 920) return \"tablet\"\n  return \"desktop\"\n}\n\nconst caputerScreen = () => {\n  let w = window.open()\n  let c = document.cloneNode(document)\n  w.document.body.appendChild(c.getElementById(\"slidecard\"))\n  w.print()\n  w.close()\n}\n\nconst Models = {\n  caputerScreen,\n  markup,\n  profile: getProfile(window.innerWidth),\n  SlideShowStruct,\n  Presentations,\n  CurrentPresentation,\n  SlideModel,\n  modals: {\n    presentations: false,\n    slides: false,\n    auth: false,\n  },\n  toggleModal: (mdl, modal) => (mdl.modals[modal] = !mdl.modals[modal]),\n  code: code(),\n  isLoggedIn: false,\n}\n\nexport default Models\n","import { log } from \"utils\"\nimport { without } from \"ramda\"\nimport { deletePresentationsTask } from \"../model.js\"\nimport Task from \"data.task\"\nimport { RemoveLine } from \"@mithril-icons/clarity/cjs/index\"\n\nconst Presentation = ({ attrs: { mdl } }) => {\n  const onError = (task) => (error) => log(`error with ${task}: `)(error)\n  const onSuccess = (models) => (deleted) => {\n    return (models.Presentations = without([deleted], models.Presentations))\n  }\n\n  const authDeleteTask = (id) =>\n    window.confirm(\"Are you sure you want to delete?\")\n      ? Task.of(id)\n      : Task.rejected(\"user denied req\")\n\n  const removePresTask = (pId) =>\n    authDeleteTask(pId)\n      .chain(deletePresentationsTask)\n      .fork(onError(\"deleting\"), onSuccess(mdl))\n\n  return {\n    view: ({ attrs: { title, id, mdl } }) =>\n      m(\n        \".card.column.col-3\",\n        { style: { margin: \"10px\" } },\n        m(\n          \".tile\",\n          {\n            style: { height: \"100px\" },\n            onclick: () => m.route.set(`/presentation/${id}/slides`),\n          },\n          m(\".tile-content\", title),\n          m(\n            \".tile-action\",\n            mdl.isLoggedIn &&\n              m(RemoveLine, {\n                style: {\n                  width: \"0.8rem\",\n                  \"margin-right\": \"30px\",\n                },\n                onclick: (e) => {\n                  e.stopPropagation()\n                  removePresTask(id)\n                },\n              })\n          )\n        )\n      ),\n  }\n}\n\nexport default Presentation\n","import { clone } from \"ramda\"\nimport { animateFadeIn, log } from \"utils\"\nimport PresentationModal from \"./presentationModal.js\"\nimport Presentation from \"./Presentation/component.js\"\nimport { getPresentations } from \"./model.js\"\n\nconst Presentations = () => {\n  const state = {\n    errors: null,\n    title: \"\",\n  }\n\n  const onError = (error) => {\n    log(\"error\")(error)\n    state.error = error\n  }\n\n  const onSuccess = (mdl) => (dto) => (mdl.Presentations = dto)\n\n  const findPresentations = ({ attrs: { mdl } }) =>\n    getPresentations().fork(onError, onSuccess(mdl))\n\n  return {\n    oninit: findPresentations,\n\n    view: ({ attrs: { mdl } }) => [\n      mdl.modals.presentations &&\n        m(PresentationModal, {\n          onremove: () => {\n            state.title = \"\"\n            state.errors = null\n          },\n          mdl,\n          state,\n          presentations: mdl.Presentations,\n          presentationModel: clone(mdl.PresentationModel),\n        }),\n\n      m(\n        \".container.columns\",\n        {\n          oncreate: ({ dom }) => animateFadeIn({ dom }),\n          onBeforeRemove: (vnode, done) => {\n            vnode.dom.addEventListener(\"animationend\", done)\n            vnode.dom.style.animation = \"fadeOut 1s\"\n          },\n        },\n        [\n          mdl.Presentations &&\n            mdl.Presentations.map(({ title, id }) =>\n              m(Presentation, {\n                key: id,\n                id,\n                title,\n                mdl,\n              })\n            ),\n        ]\n      ),\n    ],\n  }\n}\n\nexport default Presentations\n","import { getQlTask, log } from \"utils\"\nimport { path } from \"ramda\"\n\nconst toViewModel = ({ data, errors }) => {\n  log(\"errors\")(errors)\n  return { data, errors }\n}\n\nexport const getPresentations = () =>\n  getQlTask(`query {\n  presentations{ id, title}\n}`).map(path([\"data\", \"presentations\"]))\n\nexport const savePresentationTask = (state) => {\n  const q = `mutation {\n    createPresentation(data: {title: ${JSON.stringify(state.title)}})\n    { title id}\n  }`\n  return getQlTask(q).map(path([\"data\", \"createPresentation\"]))\n}\n\nexport const deletePresentationsTask = (id) => {\n  const q = `mutation {\n    deletePresentation(where: {id: ${JSON.stringify(id)}})\n    { title id}\n  }`\n  return getQlTask(q).map(path([\"data\", \"deletePresentation\"]))\n}\n","import { savePresentationTask } from \"./model.js\"\nimport { log } from \"utils\"\nimport { Modal } from \"components/modal\"\n\nconst PresentationModal = ({\n  attrs: { state, mdl, presentations, onremove },\n}) => {\n  const onError = (errors) => {\n    log(\"error\")(errors)\n    state.errors = errors\n    toggleModal()\n  }\n  const onSuccess = (p) => {\n    state.title = \"\"\n    state.errors = null\n    presentations.push(p)\n    mdl.toggleModal(mdl, \"presentations\")\n  }\n\n  const save = (e) => {\n    e.preventDefault()\n    savePresentationTask(state).fork(onError, onSuccess)\n  }\n\n  return {\n    view: () =>\n      m(Modal, {\n        onremove,\n        mdl: mdl,\n        id: \"presentations\",\n        modalTitle: \"New Presentation\",\n        modalContent: m(\"input\", {\n          value: state.title,\n          autofocus: true,\n          type: \"text\",\n          onkeyup: (e) => (state.title = e.target.value),\n        }),\n        modalFooter: m(\n          \"button.card-btn\",\n          { onclick: save },\n          \"create presentation\"\n        ),\n      }),\n  }\n}\n\nexport default PresentationModal\n","import { concat, eqProps, compose, filter, map, propEq, head } from \"ramda\"\nimport { log , animateFadeIn} from \"utils\"\nimport {\n  forGreater,\n  reduceOrder,\n  updateRemoveSlide,\n  updateSlideTask\n} from \"../model.js\"\nimport {RemoveLine,EditLine} from '@mithril-icons/clarity/cjs'\n\nconst SlidePosition = ({ attrs: { update } }) => {\n  const updateSlidesPosition = (dir, slides, slide) => {\n    switch (dir) {\n      case \"left\":\n        let prevSlide = slides.filter((x) => x.order == slide.order - 1)[0]\n        prevSlide.order++\n        slide.order--\n        update([prevSlide, slide])\n        break\n      case \"right\":\n        let nextSlide = slides.filter((x) => x.order == slide.order + 1)[0]\n        slide.order++\n        nextSlide.order--\n        update([nextSlide, slide])\n        break\n    }\n  }\n\n  return {\n    view: ({ attrs: { slides, slide, dir } }) =>\n      m(`button.s-circle`, {\n        disabled:\n          (dir == \"right\" && slide.order == slides.length) ||\n          (dir == \"left\" && slide.order == 1),\n        onclick: () => updateSlidesPosition(dir, slides, slide)\n      }, m(`i.icon icon-arrow-${dir}`))\n  }\n}\n\nconst Preview = ({ attrs: { getSlides, mdl, s, key, state } }) => {\n  const onError = (task) => (error) => log(`error with ${task}`)(error)\n\n  const onSuccess = (_) =>\n    getSlides({ attrs: { mdl } })\n\n\n  const updateAndSaveSlideTask = (slides) => {\n    return updateSlideTask(mdl.CurrentPresentation.id)(slides).fork(\n      onError(\"updating\"),\n      onSuccess\n    )\n  }\n\n  const removeSlideTask = (s) => {\n    let tail = compose(\n      map(reduceOrder),\n      filter(forGreater(s))\n    )(state.right())\n    let removeSlide = updateRemoveSlide(s)\n\n    let updateList = concat(removeSlide, tail)\n\n    updateAndSaveSlideTask(updateList)\n  }\n\n  const handleDragStart = (ev) => {\n    ev.target.style.opacity = \"0.4\"\n    ev.dataTransfer.effectAllowed = \"move\"\n    ev.dataTransfer.setData(\"text/plain\", \"preview\")\n    state.previewDrag.drag = head(filter(propEq(\"id\", s.id), state.right()))\n  }\n\n  const handleDragOver = (ev) => {\n    ev.preventDefault()\n\n    if (state.previewDrag.drag) state.previewDrag.drop = s\n  }\n\n  const handleDragLeave = (ev) => {\n    ev.preventDefault()\n    state.previewDrag.drop = null\n  }\n\n  const handleDrop = (ev) => ev.preventDefault()\n\n  const handleDragEnd = (ev) => {\n    ev.target.style.opacity = \"1\"\n    state.slideDrag.dragging = false\n    if (state.previewDrag.drop) {\n      let start = state.previewDrag.drag.order\n      let end = state.previewDrag.drop.order\n\n      let dragged = state.previewDrag.drag\n      let dropped = state.previewDrag.drop\n\n      state.previewDrag.drag = mdl.SlideModel\n      state.previewDrag.drop = mdl.SlideModel\n\n      if (!eqProps(\"id\", dragged, dropped)) {\n        dragged.order = end\n        dropped.order = start\n\n        updateAndSaveSlideTask([dragged, dropped])\n      }\n    }\n  }\n\n  return {\n    oncreate: ({ dom }) => animateFadeIn({ dom }),\n    view: ({ attrs: { mdl, s, state } }) =>\n      m(\n        \".card.preview\",\n        {\n          draggable: mdl.isLoggedIn,\n          ondragstart: handleDragStart,\n          ondragend: handleDragEnd,\n          ondragover: handleDragOver,\n          ondrop: handleDrop,\n          ondragleave: handleDragLeave,\n          style: {\n            position:'relative',\n            opacity:\n              state.previewDrag.drop && state.previewDrag.drop.id == s.id\n                ? 0.4\n                : 1\n          }\n        },\n        [\n          m(\".card-header\",[\n            m(\"p.slidePosition\", s.order),\n            mdl.isLoggedIn && m(\n              RemoveLine,\n              {\n                style:{\n                  position:'absolute',\n                  top: 0,\n                  right: 0,\n                },\n                onclick: () => removeSlideTask(s)\n              },\n            ),\n          ]),\n          m(\"p.slidePosition\", s.title),\n          // m(\".card-body\", m.trust(mdl.markup.render(s.content || \"\"))),\n         mdl.isLoggedIn && m(\".card-footer\", [\n            m(SlidePosition, {\n              slides: state.right(),\n              dir: \"left\",\n              slide: s,\n              update: updateAndSaveSlideTask\n            }),\n            m(EditLine,{             style:{\n              position:'absolute',\n              top: 35,\n              right: 0,\n            },\n              onclick: () =>  {\n                m.route.set(`/edit/${mdl.CurrentPresentation.id}/slide/${s.id}`)\n              },\n            }),\n            m(SlidePosition, {\n              slides: state.right(),\n              dir: \"right\",\n              slide: s,\n              update: updateAndSaveSlideTask\n            })\n          ])\n        ]\n      )\n  }\n}\n\nexport default Preview\n","import Task from 'data.task'\nimport { log } from 'utils'\nimport { take } from 'ramda'\nimport {\n  updateSlideDragStart,\n  updateSlideDragEnd,\n  updateStateDragEnd,\n  updateSlideTask,\n  deleteSlideTask,\n} from '../model.js'\nimport { EditLine, RemoveLine } from '@mithril-icons/clarity/cjs'\n\nconst Slide = ({ attrs: { getSlides, mdl, s, key, state } }) => {\n  const onError = task => error => log(`error with ${task}`)(error)\n  const onSuccess = _ => getSlides({ attrs: { mdl } })\n\n  const authDeleteTask = id =>\n    window.confirm('Are you sure you want to delete?')\n      ? Task.of(id)\n      : Task.rejected(id)\n\n  const removeSlideTask = id =>\n    authDeleteTask(id)\n      .chain(deleteSlideTask(state.presentationId))\n      .fork(onError('deleting'), onSuccess)\n\n  const addSlideToShow = s => {\n    updateSlideTask(state.presentationId)([s]).fork(onError('updating'), _ => {\n      state.slideDrag = {\n        dragId: '',\n        dragging: false,\n        droppable: false,\n      }\n      onSuccess()\n    })\n  }\n\n  const handleDragStart = ev => {\n    ev.target.style.opacity = '0.4'\n    ev.dataTransfer.effectAllowed = 'move'\n    ev.dataTransfer.setData('text/plain', 'slide')\n    state.slideDrag = updateSlideDragStart(s)(state.slideDrag)\n  }\n\n  const handleDragEnd = ev => {\n    ev.target.style.opacity = '1'\n    if (state.slideDrag.droppable) {\n      let _slide = updateSlideDragEnd(state.right().length)(s)\n\n      updateStateDragEnd(state.slideDrag)\n      return addSlideToShow(_slide)\n    }\n  }\n\n  return {\n    view: ({ attrs: { s, state, mdl } }) =>\n      m(\n        '.card',\n        {\n          id: s.id,\n          draggable: mdl.isLoggedIn,\n          ondragstart: handleDragStart,\n          ondragend: handleDragEnd,\n        },\n        [\n          m('div.card-header', [   m( 'h1.title', m('span', take(15, s.title))),   ]),\n          mdl.isLoggedIn && m('.card-footer',\n          m(RemoveLine, {\n            onclick: () => removeSlideTask(s.id),\n          }),\n          m(EditLine,{\n            onclick: () =>\n             m.route.set(`/edit/${state.presentationId}/slide/${s.id}`),\n          })),\n        ]\n      ),\n  }\n}\n\nexport default Slide\n","import {\n  clone,\n  filter,\n  propEq,\n  prop,\n  without,\n  concat,\n  head,\n  sortBy,\n} from \"ramda\"\nimport SlidesModal from \"./slidesModal.js\"\nimport Slide from \"./Slide/component.js\"\nimport Preview from \"./Preview/component.js\"\nimport { loadSlides } from \"./model.js\"\nimport { log } from \"utils\"\nimport { autoDetection } from \"highlight.js\"\n\nconst Slides = ({ attrs: { mdl } }) => {\n  const state = {\n    left: Stream([]),\n    right: Stream([]),\n    slideDrag: {\n      dragId: \"\",\n      dragging: false,\n      droppable: false,\n    },\n    previewDrag: {\n      drag: null,\n      drop: null,\n    },\n    presentationId: \"\",\n  }\n\n  const onError = log(\"error\")\n\n  const onSuccess = (presentation) => {\n    let slides = mdl.CurrentPresentation.Slides\n\n    state.left(filter(propEq(\"order\", 0), slides))\n\n    state.right(sortBy(prop(\"order\"), without(state.left(), slides)))\n\n    mdl.CurrentPresentation.slideShow = Stream(state.right())\n  }\n\n  const getSlides = ({ attrs: { mdl } }) => {\n    state.presentationId = m.route.param(\"id\")\n    return loadSlides(state.presentationId)(mdl).fork(onError, onSuccess)\n  }\n\n  const handleDragEnter = (ev) => {\n    ev.preventDefault()\n    state.bColor = true\n  }\n\n  const handleDragLeave = (ev) => {\n    ev.preventDefault()\n    state.slideDrag.dragging = false\n    state.slideDrag.droppable = false\n    state.bColor = false\n  }\n\n  const handleDrop = (ev) => {\n    ev.preventDefault()\n    let type = ev.dataTransfer.getData(\"text/plain\")\n    if (state.slideDrag.dragging) {\n      if (type == \"slide\") {\n        let item = head(\n          filter(propEq(\"id\", state.slideDrag.dragId), state.left())\n        )\n        state.slideDrag.droppable = true\n        item.order = state.right().length + 1\n        state.left(without([item], state.left()))\n        state.right(concat(state.right(), [item]))\n      } else {\n        let item = head(\n          filter(propEq(\"id\", state.slideDrag.dragId), state.right())\n        )\n      }\n    }\n  }\n\n  const handleDragOver = (ev) => {\n    ev.preventDefault()\n    let type = ev.dataTransfer.getData(\"text/plain\")\n    state.slideDrag.dragging = true\n    ev.dataTransfer.dropEffect = \"move\"\n  }\n\n  return {\n    oninit: getSlides,\n    view: ({ attrs: { mdl } }) => [\n      mdl.toggleModal\n        ? m(SlidesModal, {\n            slide: clone(mdl.SlideModel),\n            getSlides,\n            mdl,\n            pId: state.presentationId,\n          })\n        : \"\",\n      m(\".container.slides\", [\n        m(\n          `aside.left-drag ${state.left().length == 0 ? \".isDragging\" : \"\"}`,\n          {\n            style: {\n              overflowY: \"auto\",\n            },\n            onBeforeRemove: (vnode, done) => {\n              vnode.dom.addEventListener(\"animationend\", done)\n              vnode.dom.style.animation = \"fadeOut 1s\"\n            },\n          },\n          state.left().map((s) =>\n            m(Slide, {\n              key: s.id,\n              mdl,\n              getSlides,\n              s,\n              state,\n            })\n          )\n        ),\n\n        m(\n          `section.right-drag${state.slideDrag.dragging ? \".isDragging\" : \"\"}`,\n          {\n            style: {\n              height: \"90vh\",\n              overflowY: \"auto\",\n            },\n            onBeforeRemove: (vnode, done) => {\n              vnode.dom.addEventListener(\"animationend\", done)\n              vnode.dom.style.animation = \"fadeOut 1s\"\n            },\n            ondragleave: handleDragLeave,\n            ondrop: handleDrop,\n            ondragover: handleDragOver,\n            ondragenter: handleDragEnter,\n          },\n          state.right().map((s) => {\n            return m(Preview, {\n              key: s.id,\n              mdl,\n              getSlides,\n              s,\n              state,\n            })\n          })\n        ),\n      ]),\n    ],\n  }\n}\n\nexport default Slides\n","import { getQlTask } from \"utils\"\nimport { compose, lt, prop, gt, set, lensProp, subtract, path } from \"ramda\"\n\nconst toViewModel = (model) => (presentations) =>\n  (model.CurrentPresentation = presentations)\n\nexport const toStruct = (acc, item) => {\n  if (item.order > 0 && !acc.keys.has(item.id)) {\n    item.order = acc.keys.size + 1\n    acc.keys.add(item.id)\n    acc.values[item.order] = item\n    acc.items(Object.keys(acc.values))\n    return acc\n  }\n  return acc\n}\n\nconst orderOf = (slide) => prop(\"order\", slide)\n\nexport const forGreater = (removeSlide) => (checkSlide) =>\n  lt(orderOf(removeSlide), orderOf(checkSlide))\n\nexport const forLess = (removeSlide) => (checkSlide) =>\n  gt(orderOf(removeSlide), orderOf(checkSlide))\n\nexport const reduceOrder = (slide) =>\n  set(lensProp(\"order\", slide), subtract(orderOf(slide), 1), slide)\n\nexport const getId = (item) => prop(\"id\", item)\n\nconst resetOrder = (slide) => set(lensProp(\"order\", slide), 0, slide)\n\nexport const updateRemoveSlide = compose(Array.of, resetOrder)\n\nconst updateId = (slide) => (slideDrag) =>\n  set(lensProp(\"dragId\", slideDrag), prop(\"id\", slide), slideDrag)\n\nexport const updateSlideDragStart = (slide) =>\n  compose(updateId(slide), updateDrag)\n\nconst updateOrder = (length) => (slide) => set(lensProp(\"order\"), length, slide)\n\nexport const updateSlideDragEnd = (length) => compose(updateOrder(length))\n\nconst updateDrag = (state) => set(lensProp(\"dragging\", false, state))\n\nconst updateDrop = (state) => set(lensProp(\"droppable\", false, state))\n\nexport const updateStateDragEnd = compose(updateDrop, updateDrag)\n\nexport const loadSlides = (id) => (model) =>\n  getQlTask(\n    `{ presentation(where:{id:${JSON.stringify(id)}}){\n      id, title, Slides { id title content order }\n    } }`\n  )\n    .map(path([\"data\", \"presentation\"]))\n    .map(toViewModel(model))\n\nexport const saveSlideTask = ({ title, order, presentation_id }) => {\n  let q = `mutation {\n            updatePresentation(\n              where: {\n                id: ${JSON.stringify(presentation_id)}\n              }\n              data: {\n                  Slides:{\n                    create : {\n                      title: ${JSON.stringify(title)}\n                      content: \"\"\n                      order: ${JSON.stringify(order)}\n                    }\n                  }\n          }){\n    id title Slides { id title content order }\n  } }`\n\n  return getQlTask(q).map(path([\"data\", \"updatePresentation\", \"Slides\"]))\n}\n\nexport const deleteSlideTask = (presentation_id) => (id) => {\n  let q = `mutation {\n            updatePresentation(\n              where: {\n                id: ${JSON.stringify(presentation_id)}\n              }\n              data: {\n                  Slides:{\n                    delete : [{\n                      id: ${JSON.stringify(id)}\n                    }]\n                  }\n          }){\n    id title Slides { id title content order}\n  } }`\n\n  return getQlTask(q).map(path([\"data\", \"updatePresentation\", \"Slides\"]))\n}\n\nexport const updateSlideTask = (presentation_id) => (slides) => {\n  let qlSlides = slides.map(\n    (slide) =>\n      `{\n      where: {\n        id: ${JSON.stringify(slide.id)}\n      }\n      data: {\n        order: ${JSON.stringify(slide.order)}\n      }\n    }`\n  )\n\n  let q = `mutation {\n            updatePresentation(\n              where: {\n                id: ${JSON.stringify(presentation_id)}\n              }\n              data: {\n                Slides:{\n                  update : [${qlSlides}]\n                }\n              }\n            )\n          { id title Slides { id title content order } }\n        }`\n\n  return getQlTask(q).map(path([\"data\", \"updatePresentation\", \"Slides\"]))\n}\n","import { assoc } from \"ramda\"\nimport { saveSlideTask } from \"./model.js\"\nimport { Modal } from \"components/modal\"\n\nconst SlidesModal = ({ attrs: { pId, slide, getSlides, mdl } }) => {\n  const state = {\n    errors: \"\",\n    title: \"\",\n  }\n\n  const onError = (errors) => {\n    log(\"error\")(errors)\n    state.errors = errors\n  }\n\n  const onSuccess = () => {\n    getSlides({ attrs: { mdl } })\n    mdl.toggleModal(mdl, \"slides\")\n  }\n\n  const save = (e) => {\n    e.preventDefault()\n    let dto = assoc(\"presentation_id\", pId, assoc(\"title\", state.title, slide))\n    saveSlideTask(dto).fork(onError, onSuccess)\n  }\n\n  return {\n    view: () =>\n      m(Modal, {\n        onremove: () => {\n          state.title = \"\"\n          state.errors = \"\"\n        },\n        mdl: mdl,\n        id: \"slides\",\n        modalTitle: \"New Slide\",\n        modalContent: m(\"input\", {\n          value: state.title,\n          autofocus: true,\n          type: \"text\",\n          onkeyup: (e) => (state.title = e.target.value),\n        }),\n        modalFooter: m(\"button.card-btn\", { onclick: save }, \"add slide\"),\n      }),\n  }\n}\n\nexport default SlidesModal\n","import { pluck } from \"ramda\"\nimport { animateEntranceRight } from \"utils\"\n\nconst ENDING = `<div class=\"endingContainer\">\n<h1 class=\"endingTitle\">THE END!</h1>\n<img class=\"endingImg\" id=\"ending\" src=\"https://imgur.com/uj15GJp.gif\" width=\"100%\" />\n</div>\n`\n\nconst SlideShow = ({ attrs: { mdl } }) => {\n  const state = {\n    update: false,\n    key: undefined,\n    cursor: 0,\n    size: mdl.CurrentPresentation.slideShow().length,\n    contents: pluck(\"content\", mdl.CurrentPresentation.slideShow())\n  }\n\nconst calcStatePosition = (x) => x > (window.innerWidth/2) ? 'right' : 'left'\n\n const updateStatePosition = (x, state) =>\n   state.key = calcStatePosition(x) == 'right' ?'ArrowRight':'ArrowLeft'\n\n\n  const nextSlide = () => {\n    window.scrollTo({top:0, behaviour: \"smooth\" })\n    if (state.cursor == state.size - 1) state.contents[state.cursor] = ENDING\n    else {\n      state.cursor++\n    }\n    return state\n  }\n\n  const prevSlide = () => {\n    window.scrollTo({top:0, behaviour: \"smooth\" })\n    state.cursor == 0 ? state.cursor : state.cursor--\n  }\n\n  const changeSlide = (key, target) => {\n    switch (key) {\n      case \"ArrowLeft\":\n        if (target.children) prevSlide(target)\n        break\n      case \"ArrowRight\":\n        if (target.children) nextSlide(target)\n        break\n      case \"ArrowUp\":\n        target.scrollBy(0, 100)\n        break\n      case \"ArrowDown\":\n        target.scrollBy(0, -100)\n        break\n    }\n  }\n\n  return {\n    dir: state.key,\n    oninit: state.slide = state.contents[state.cursor],\n    view: ({ attrs: { mdl } }) =>\n      m(\n        \".slideshow#slideshow.right\",\n        {\n          tabindex: 0,\n          onkeyup: ({ key, target }) => {\n            state.update = true\n            state.key = key\n            changeSlide(key, target)\n          },\n          onclick: ({x, target}) => {\n            state.update = true\n            updateStatePosition(x, state)\n            return changeSlide(state.key, target)\n          }\n        },\n        m(\n          \".slidecard#slidecard\",\n          {\n            onmouseenter:({x, target}) => {\n              state.update = false\n              target.style.cursor = calcStatePosition(x)\n            },\n            onmouseleave:({x, target}) => {\n              state.update = false\n              target.style.cursor = calcStatePosition(x), target\n            },\n            onbeforeupdate: () => ![\"ArrowUp\", \"ArrowDown\"].includes(state.key) && state.update,\n            onupdate: ({ dom }) => animateEntranceRight({ dom })\n          },\n          m.trust(mdl.markup.render(state.contents[state.cursor] || ENDING))\n        )\n      )\n  }\n}\n\nexport default SlideShow\n","export const onlineUrl =\n  \"https://eu1.prisma.sh/boaz-blake-8951e1/mithril-presenter/dev\"\n\nexport const authSettings = {\n  domain: \"boazblake.auth0.com\",\n  clientID: \"5Ba9gkttaS9uikqMkTbFr7loUeDzhwty\",\n  redirect_uri: window.location.origin,\n  responseType: \"token id_token\",\n}\n\nconst getRandomInt = (n) => Math.floor(Math.random() * Math.floor(n))\nexport const code = () =>\n  [\n    getRandomInt(9),\n    getRandomInt(9),\n    getRandomInt(9),\n    getRandomInt(9),\n    getRandomInt(9),\n    getRandomInt(9),\n  ].join(\"\")\n\nexport const emailMe = (code) => ({\n  // Host : \"smtp.elasticemail.com\",\n  // Username : \"boazblake@gmail.com\",\n  // Password : \"764A40CB22F6EAE1812BB335E82CDF009751\",\n  SecureToken: \"69f7853b-05d3-4bc2-888a-5c8056e02044\",\n  To: \"boazblake@gmail.com\",\n  From: \"boazblake@gmail.com\",\n  Subject: \"Check the code\",\n  Body: code,\n})\n","import Task from \"data.task\"\nimport { onlineUrl, makeQuery } from \"./index.js\"\n\nexport const postQl = query =>\n  new Task((rej, res) =>\n    m\n      .request({\n        method: \"POST\",\n        url: `${onlineUrl}`,\n        withCredentials: false,\n        body: makeQuery(query),\n      })\n      .then(res, rej)\n  )\n\nconst postTask = url => ({ dto }) =>\n  new Task((rej, res) =>\n    m\n      .request({\n        method: \"POST\",\n        url: `${onlineUrl}/${url}`,\n        body: dto,\n        withCredentials: false,\n      })\n      .then(res, rej)\n  )\n\nconst putTask = url => ({ dto }) =>\n  new Task((rej, res) =>\n    m\n      .request({\n        method: \"PUT\",\n        url: `${onlineUrl}/${url}`,\n        body: dto,\n        withCredentials: false,\n      })\n      .then(res, rej)\n  )\n\nconst getTask = url =>\n  new Task((rej, res) =>\n    m\n      .request({\n        method: \"GET\",\n        url: `${onlineUrl}/${url}`,\n        withCredentials: false,\n      })\n      .then(res, rej)\n  )\n\nconst deleteTask = url => id =>\n  new Task((rej, res) =>\n    m\n      .request({\n        method: \"DELETE\",\n        url: `${onlineUrl}/${url}/${id}`,\n        withCredentials: false,\n      })\n      .then(res, rej)\n  )\n\nexport default { postTask, putTask, getTask, deleteTask, postQl }\n","import anime from \"animejs\"\n\nexport const animateSlideEntrance = ({ dom }) => {\n  return dom.animate(\n    [\n      { transform: \"translate3d(20%,0,0)\", opacity: 0 },\n      { transform: \"none\", opacity: 1 }\n    ],\n    {\n      duration: 650\n    }\n  )\n}\n\nexport const animateEntranceRight = ({ dom }) => {\n  return dom.animate(\n    [\n      {\n        animation: \"\",\n        transform: \"translate3d(100%,0,0)\",\n        scale: 2,\n        opacity: 0\n      },\n      {\n        animation: \"stretchRight 1s ease-in-out both\",\n        transform: \"none\",\n        opacity: 1,\n        scale: 1\n      }\n    ],\n    {\n      duration: 350\n    }\n  )\n}\n\nexport const animateChildEntrance = ({ dom }) => {\n  let children = [...dom.children]\n\n  return children.map((child, index) => {\n    setTimeout(() => {\n      child.animate(\n        [\n          { transform: \"translate3d(0,-100%,0)\", opacity: 0 },\n          { transform: \"none\", opacity: 1 }\n        ],\n        {\n          duration: 850\n        }\n      )\n    }, (index + 1) * 200)\n  })\n}\n\nexport const animateExit = (dom) => {\n  let children = [...dom.children]\n\n  let anim = animate([\n    { transform: \"none\", opacity: 1 },\n    { transform: \"translate3d(25%,100%,0)\", opacity: 0 }\n  ])\n\n  let waapi = children.map((child) =>\n    child.animate(anim, {\n      duration: 850\n    })\n  )\n\n  return new Promise((resolve) => {\n    waapi.onfinish = function(e) {\n      resolve()\n    }\n  })\n}\n\nexport const animateFadeIn = ({ dom }) => {\n  let children = [...dom.children]\n  children.map((child, index) => {\n    child.style.opacity = 0\n    child.style.transition = \"opacity .4s ease-in-out\"\n\n    return setTimeout(() => {\n      child.style.opacity = 1\n    }, (index + 1) * 200)\n  })\n}\n\nexport const animateFadeOut = ({ dom }) => {\n  let anim = [\n    { transition: \"opacity .4s ease-in-out\" },\n    { transform: \"none\", opacity: 1 },\n    { transform: \"translate3d(25%,100%,0)\", opacity: 0 }\n  ]\n  let waapi = dom.animate(anim, {\n    duration: 850\n  })\n\n  return new Promise((resolve) => {\n    waapi.onfinish = function(e) {\n      resolve()\n    }\n  })\n}\n\nexport const animeEntrance = ({ dom }) => {\n  let children = [...dom.children]\n  const res = children.map((el) =>\n    anime({\n      target: el,\n      easing: \"easeInQuad\",\n      translateX: 250,\n      offset: 0\n    })\n  )\n\n  return res\n}\n\nexport const bounceEntrance = ({ dom }) => {\n  return dom.animate({\n    animation: \"animation 1000ms linear both\",\n    keyframes: {\n      \"0%\": {\n        transform: \"matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)\"\n      },\n      \"3.4%\": {\n        transform:\n          \"matrix3d(1.316, 0, 0, 0, 0, 1.407, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)\"\n      },\n      \"4.7%\": {\n        transform:\n          \"matrix3d(1.45, 0, 0, 0, 0, 1.599, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)\"\n      },\n      \"6.81%\": {\n        transform:\n          \"matrix3d(1.659, 0, 0, 0, 0, 1.893, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)\"\n      },\n      \"9.41%\": {\n        transform:\n          \"matrix3d(1.883, 0, 0, 0, 0, 2.168, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)\"\n      },\n      \"10.21%\": {\n        transform:\n          \"matrix3d(1.942, 0, 0, 0, 0, 2.226, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)\"\n      },\n      \"13.61%\": {\n        transform:\n          \"matrix3d(2.123, 0, 0, 0, 0, 2.332, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)\"\n      },\n      \"14.11%\": {\n        transform:\n          \"matrix3d(2.141, 0, 0, 0, 0, 2.331, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)\"\n      },\n      \"17.52%\": {\n        transform:\n          \"matrix3d(2.208, 0, 0, 0, 0, 2.239, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)\"\n      },\n      \"18.72%\": {\n        transform:\n          \"matrix3d(2.212, 0, 0, 0, 0, 2.187, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)\"\n      },\n      \"21.32%\": {\n        transform:\n          \"matrix3d(2.196, 0, 0, 0, 0, 2.069, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)\"\n      },\n      \"24.32%\": {\n        transform:\n          \"matrix3d(2.151, 0, 0, 0, 0, 1.96, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)\"\n      },\n      \"25.23%\": {\n        transform:\n          \"matrix3d(2.134, 0, 0, 0, 0, 1.938, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)\"\n      },\n      \"29.03%\": {\n        transform:\n          \"matrix3d(2.063, 0, 0, 0, 0, 1.897, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)\"\n      },\n      \"29.93%\": {\n        transform:\n          \"matrix3d(2.048, 0, 0, 0, 0, 1.899, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)\"\n      },\n      \"35.54%\": {\n        transform:\n          \"matrix3d(1.979, 0, 0, 0, 0, 1.962, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)\"\n      },\n      \"36.74%\": {\n        transform:\n          \"matrix3d(1.972, 0, 0, 0, 0, 1.979, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)\"\n      },\n      \"41.04%\": {\n        transform:\n          \"matrix3d(1.961, 0, 0, 0, 0, 2.022, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)\"\n      },\n      \"44.44%\": {\n        transform:\n          \"matrix3d(1.966, 0, 0, 0, 0, 2.032, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)\"\n      },\n      \"52.15%\": {\n        transform:\n          \"matrix3d(1.991, 0, 0, 0, 0, 2.006, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)\"\n      },\n      \"59.86%\": {\n        transform:\n          \"matrix3d(2.006, 0, 0, 0, 0, 1.99, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)\"\n      },\n      \"63.26%\": {\n        transform:\n          \"matrix3d(2.007, 0, 0, 0, 0, 1.992, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)\"\n      },\n      \"75.28%\": {\n        transform:\n          \"matrix3d(2.001, 0, 0, 0, 0, 2.003, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)\"\n      },\n      \"85.49%\": {\n        transform:\n          \"matrix3d(1.999, 0, 0, 0, 0, 2, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)\"\n      },\n      \"90.69%\": {\n        transform:\n          \"matrix3d(1.999, 0, 0, 0, 0, 1.999, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)\"\n      },\n      \"100%\": {\n        transform: \"matrix3d(2, 0, 0, 0, 0, 2, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)\"\n      }\n    }\n  })\n}\n","export * from './animations.js'\nexport * from './requests.js'\nexport * from './.secret.js'\n\n\nconst makeQuery = string => JSON.parse(JSON.stringify(string))\n\n\nconst repeat = n => f => x => {\n  let m = n\n  while (true) {\n    if (m === 0) return x\n    else (m = m - 1), (x = f(x))\n  }\n}\n\nconst wait = n => f => x => {\n  let m = n\n  while (true) {\n    if (m === 0) return x\n    else (m = m - 1), (x = f(x))\n  }\n}\n\nconst log = m => v => {\n  console.log(m, v)\n  return v\n}\n\nconst viewModelMap = signature => {\n  var _map = {}\n  return function(key) {\n    if (!_map[key]) {\n      _map[key] = {}\n      for (var prop in signature) _map[key][prop] = Stream(signature[prop]())\n    }\n    return _map[key]\n  }\n}\nexport { viewModelMap, log, repeat, wait, makeQuery }\n","import httpTasks from \"./Tasks.js\"\n\nimport { log } from \"./index.js\"\n\nexport const findPresentationsTask = () => httpTasks.getTask(\"presentations\")\n\nexport const getQlTask = (query) => httpTasks.postQl({ query })\n\nexport const savePresentationTask = (dto) =>\n  httpTasks.postTask(`presentations`)({\n    dto\n  })\n\nexport const deletePresentationsTask = (id) =>\n  httpTasks.deleteTask(\"presentations\")(id)\n\nexport const findSlidesTask = (id) =>\n  httpTasks.getTask(`presentations/${id}/slides`)\n\nexport const saveSlideTask = (dto) => httpTasks.postTask(`slides`)({ dto })\n\nexport const updateSlideTask = (id) => (dto) =>\n  httpTasks.putTask(`slides/${id}`)({ dto })\n\nexport const deleteSlideTask = (id) => httpTasks.deleteTask(\"slides\")(id)\n\nexport const loadSlideTask = (id) => httpTasks.getTask(`slides/${id}`)\n"]}